(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{190:function(e,t){},199:function(e,t,a){e.exports=a(364)},214:function(e,t){},26:function(e,t,a){var n={};n.DEBUG=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_DEBUG||!0,n.COMPANY="javier.sanchezostiz@gmail.com",n.VERSION="20200908-1",n.PROJECT=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_PROJECT||"react-gestor-andia",n.API_DOMAIN="http://gestion.construccionesandia.com/index.php",n.STATIC_CONTENT_URL=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_STATIC_CONTENT_URL||"//s3.us-east-2.amazonaws.com/artworks-s3/construcciones-andia",n.DEFAULT_USER_PROFILE=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_DEFAULT_USER_PROFILE||"".concat(n.STATIC_CONTENT_URL,"/img/icon.svg"),n.TOKEN_NAME=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_TOKEN_NAME||"".concat(n.PROJECT,"-").concat(n.VERSION.replace(/\./g,"-"),"-token"),n.LOCALSTORAGE=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_LOCALSTORAGE||"".concat(n.PROJECT,"-").concat(n.VERSION,"-warehouse"),n.PATHS={},n.HASH_ROUTER=!Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_HASH_ROUTER||"false"!==Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).REACT_APP_HASH_ROUTER,n.DEBUG&&console.log("".concat(n.PROJECT,": v.").concat(n.VERSION)),e.exports=n},260:function(e,t){},266:function(e,t){},337:function(e,t,a){},340:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},363:function(e,t,a){},364:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(33),i=a.n(s),c=(a(204),a(248),a(18)),r=a(19),l=a(188),u=a(189),d=a(198),p=a(14),m=a(46),f=a(15),h=a(191),v=a.n(h),b=a(2),g=a(1),E=a(26),O=a.n(E),j=Object(g.a)({},O.a);j.I18N={default:"es",langs:["es"]},j.PATHS={homepage:"/",visitas_anadir:"/visitas/anadir",visitas_editar:"/visitas/:id",visitas:"/visitas",ventas_anadir:"/ventas/anadir",ventas:"/ventas",status_promociones:"/status-promociones",configuracion:{usuarios_anadir:"/configuracion/usuarios/anadir",usuarios_editar:"/configuracion/usuarios/:id",usuarios:"/configuracion/usuarios",promociones_anadir:"/configuracion/promociones/anadir",promociones_editar:"/configuracion/promociones/:id",promociones:"/configuracion/promociones",tiposInmuebles:"/configuracion/tipos-de-inmuebles"}},j.REDIRECT={timeout:3},j.SITE={copyright:"Construcciones Andia \xa9"},j.DEFAULT={DATE_TIME_FORMAT:"DD-MM-YYYY HH:mm",DATE_FORMAT:"DD-MM-YYYY",TABLE_LIMIT:10};var y=j,M=a(43),_=Object(g.a)({},y);_.LAYOUT={};var S=_,A=a(11),x=a.n(A),I=a(4),T={RECEIVE_LOGIN_ERROR:"RECEIVE_LOGIN_ERROR",RECEIVE_LOGIN_SUCCESS:"RECEIVE_LOGIN_SUCCESS",RECEIVE_LOGOUT_SUCCESS:"RECEIVE_LOGOUT_SUCCESS",REQUEST_LOGIN:"REQUEST_LOGIN"},C=Object(g.a)({},O.a);C.LOGIN={url:"".concat(C.API_DOMAIN,"/login")};var k=C;function N(){return{type:T.RECEIVE_LOGIN_ERROR}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},a=e.email,n=e.password;return function(o){o(function(e){return{type:T.REQUEST_LOGIN,params:e}}(e));var s=k.LOGIN.url;return k.DEBUG&&console.log("fetchLogin URL",s),x.a.post(s,{email:a,password:n}).then(function(a){if(k.DEBUG&&console.log(a.status),200!==a.status)return o(N()),t(new Error("Status erros in fetchLogin expected 200 received ".concat(a.status)));var n=a.data,s=n.error,i=n.message,c=n.data;return s?(o(N()),t(new Error(i))):(o(function(e,t){return{type:T.RECEIVE_LOGIN_SUCCESS,payload:{params:e,data:t}}}(e,c)),t(null))}).catch(function(e){return k.DEBUG&&console.log("error",e),o(N()),t(e)})}}function D(){return{type:T.RECEIVE_LOGOUT_SUCCESS}}var L=function(e){var t=e.className,a=void 0===t?"nav-link":t,n=e.to,s=e.icon,i=e.value,c=[a];return o.a.createElement("li",{className:"nav-item"},o.a.createElement(m.d,{to:n,className:"".concat(c.join(" ")),activeClassName:"active"},s&&o.a.createElement("i",{className:"fe fe-".concat(s)}),i))},R=function(e){var t=e.intl,a=Object(n.useState)(!1),s=Object(M.a)(a,2),i=s[0],c=s[1],r=function(){return o.a.createElement("div",{className:"header d-lg-flex p-0 ".concat(i?"":"collapse")},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row row align-items-center"},o.a.createElement("div",{className:"col-lg-1 ml-auto"}),o.a.createElement("div",{className:"col col-lg order-lg-first"},o.a.createElement(b.m,null,o.a.createElement(L,{to:S.PATHS.visitas,value:t.formatMessage({id:"".concat("app.home.index",".visitas"),defaultMessage:"".concat("app.home.index",".visitas")}),icon:"book",activeClassName:"active"}),o.a.createElement(L,{to:S.PATHS.configuracion.usuarios,value:t.formatMessage({id:"".concat("app.home.index",".usuarios"),defaultMessage:"".concat("app.home.index",".usuarios")}),icon:"user"}),o.a.createElement(L,{to:S.PATHS.configuracion.promociones,value:t.formatMessage({id:"".concat("app.home.index",".promociones"),defaultMessage:"".concat("app.home.index",".promociones")}),icon:"home"}),o.a.createElement(L,{to:S.PATHS.status_promociones,value:t.formatMessage({id:"".concat("app.home.index",".status-promociones"),defaultMessage:"".concat("app.home.index",".status-promociones")}),icon:"layout"}),o.a.createElement(L,{to:S.PATHS.configuracion.tiposInmuebles,value:t.formatMessage({id:"".concat("app.home.index",".tipos-inmuebles"),defaultMessage:"".concat("app.home.index",".tipos-inmuebles")}),icon:"settings"}),o.a.createElement("li",{className:"nav-item logout"},o.a.createElement("a",{className:"nav-link",onClick:e.requestLogout},o.a.createElement("i",{className:"fe fe-external-link"}),t.formatMessage({id:"".concat("app.home.index",".salir"),defaultMessage:"".concat("app.home.index",".salir")}))))))))};return o.a.createElement(n.Fragment,null,o.a.createElement(b.p.Header,null,o.a.createElement(m.c,{to:S.PATHS.homepage,className:"header-brand"},o.a.createElement("img",{alt:t.formatMessage({id:"".concat("app.home.index",".logotipo"),defaultMessage:"".concat("app.home.index",".logotipo")}),src:"".concat(S.STATIC_CONTENT_URL,"/images/logo.png")})),o.a.createElement(b.d.Options,null,o.a.createElement(b.c,{color:"gray",className:"logout-btn",size:"sm",onClick:e.requestLogout},t.formatMessage({id:"".concat("app.home.index",".logout"),defaultMessage:"".concat("app.home.index",".logout")})),o.a.createElement(b.k,{name:"menu",className:"open-menu",onClick:function(){return c(!i)}}))),o.a.createElement(r,null))};R.defaultProps={};var w=Object(p.c)(Object(c.b)(function(e){return{}},function(e){return Object(r.b)({requestLogout:D},e)})(R)),V=a(24),U=a(25),B=a(23),H=a(28),G=a(27),F=a(81),z=a(79),Y=a(9),q=a.n(Y),K=(a(181),Object(g.a)({},O.a));K.HOME={chart:{chartType:"PieChart",width:"99%",height:400,options:{legend:"none",chartArea:{width:"100%",height:"70%"}},charts:{counts:function(e,t,a){var n=a?parseInt(e.vendidas,10)+parseInt(e.historico,10)+parseInt(e.reservadas,10):parseInt(e.vendidas,10);return[[t.formatMessage({id:"".concat("app.home.index",".estatus"),defaultMessage:"".concat("app.home.index",".estatus")}),t.formatMessage({id:"".concat("app.home.index",".count"),defaultMessage:"".concat("app.home.index",".count")})],[t.formatMessage({id:"".concat("app.home.index",".counts.vendidas"),defaultMessage:"".concat("app.home.index",".counts.vendidas")}),n],[t.formatMessage({id:"".concat("app.home.index",".counts.libres"),defaultMessage:"".concat("app.home.index",".counts.libres")}),parseInt(e.totales,10)-n]]},conociste:function(e,t){var a=[[t.formatMessage({id:"".concat("app.home.index",".medio"),defaultMessage:"".concat("app.home.index",".medio")}),t.formatMessage({id:"".concat("app.home.index",".visita"),defaultMessage:"".concat("app.home.index",".visita")})]];return Object(I.each)(e,function(e){var t=Object(M.a)(e,2),n=t[0],o=t[1];a.push([n,parseInt(o,10)])}),a},promociones:function(e,t){var a=[[t.formatMessage({id:"".concat("app.home.index",".promocion"),defaultMessage:"".concat("app.home.index",".promocion")}),t.formatMessage({id:"".concat("app.home.index",".visita"),defaultMessage:"".concat("app.home.index",".visita")})]];return Object(I.each)(e,function(e){var t=Object(M.a)(e,2),n=t[0],o=t[1];a.push([n,parseInt(o,10)])}),a}}},stats:{url:"".concat(K.API_DOMAIN,"/api/home"),since:{week:[7,"days"],month:[1,"months"],year:[1,"year"]}}},K.HOME.defaults={since:"year"};var Z=K,J=(a(337),Object(g.a)({},y));J.TIPOS_INMUEBLE={tableList:{url:"".concat(J.API_DOMAIN,"/api/tipos-inmuebles"),i18nKey:"app.tipos-inmuebles.index",limit:J.DEFAULT.TABLE_LIMIT,columns:{defaults:{src:function(e,t){return e[t]},type:"string",i18n:function(e){return e.key}},payload:[{key:"name"},{key:"created_at",type:"date",src:function(e,t){return q()(e[t]).format(J.DEFAULT.DATE_FORMAT)}},{key:"active",type:"boolean"}]}}},J.TIPOS_INMUEBLE.tableList.columns.payload=Object(I.map)(J.TIPOS_INMUEBLE.tableList.columns.payload,function(e){return Object(g.a)(Object(g.a)({},J.TIPOS_INMUEBLE.tableList.columns.defaults),e)});var Q=Object(g.a)(Object(g.a)({},J),y),W=Object(g.a)({},Q);W.PROMOCIONES={zonas:{url:"".concat(W.API_DOMAIN,"/api/promociones/zonas")},tableList:{url:"".concat(W.API_DOMAIN,"/api/promociones"),i18nKey:"app.promociones.index",limit:W.DEFAULT.TABLE_LIMIT,addUrl:W.PATHS.configuracion.promociones_anadir,editUrl:W.PATHS.configuracion.promociones_editar,columns:{defaults:{src:function(e,t){return e[t]},type:"string",i18n:function(e){return e.key}},payload:[{key:"id"},{key:"name"},{key:"zona"},{key:"home",type:"boolean"},{key:"active",type:"boolean"}]},isPromociones:!0}},W.PROMOCIONES.tableList.columns.payload=Object(I.map)(W.PROMOCIONES.tableList.columns.payload,function(e){return Object(g.a)(Object(g.a)({},W.PROMOCIONES.tableList.columns.defaults),e)});var X=Object(g.a)(Object(g.a)({},W),Q),$=Object(g.a)(Object(g.a)({},Z),X);var ee={didMount:function(){this.fetchHomeStats(),this.fetchPromociones()},fetchHomeStats:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=$.HOME.stats.url,n=[];return!Object(I.isNull)(this.state.since)&&Object(I.isObject)(this.state.since)&&n.push("since=".concat(this.state.since.format("YYYY-MM-DD"))),!Object(I.isNull)(this.state.until)&&Object(I.isObject)(this.state.until)&&n.push("until=".concat(this.state.until.format("YYYY-MM-DD"))),Object(I.isNull)(this.state.promocionId)||""===this.state.promocionId||n.push("promocionId=".concat(this.state.promocionId)),a=n.length?"".concat(a,"?").concat(n.join("&")):a,$.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{stats:Object(g.a)({},a.data.data)})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},fetchPromociones:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a="".concat($.PROMOCIONES.tableList.url,"?limit=100&home=1");return $.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{promociones:Object(I.chain)(a.data.data.results).map(function(e){return Object(g.a)(Object(g.a)({},e),{},{inmuebles:[]})}).orderBy("name","desc").keyBy("id").value()})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},handleDates:function(e){var t=e.startDate,a=e.endDate;this.setState({since:t,until:a},this.fetchHomeStats)}};q()().locale("es");var te=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={since:q()().subtract(Z.HOME.stats.since[Z.HOME.defaults.since][0],Z.HOME.stats.since[Z.HOME.defaults.since][1]),until:q()(),focusedInput:null,promociones:{},promocionId:null,aplicarHistorico:!1,stats:{conociste:[],counts:[],comerciales:[],promociones:[],ventas:[]}},Object(I.each)(ee,function(e,t){return n[t]=ee[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.didMount()}},{key:"render",value:function(){var e,t=this,a=function(e){return"".concat("app.home.index","-").concat(e,"-").concat(q()(t.state.since).format("X"),"-").concat(q()(t.state.until).format("X"),"-").concat(t.state.promocionId)};return o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,this.props.intl.formatMessage({id:"".concat("app.home.index",".title"),defaultMessage:"".concat("app.home.index",".title")})),o.a.createElement(b.d.Options,null,o.a.createElement(b.f.Select,{className:"input-options select-promociones",value:this.state.promocionId,onChange:function(e){return t.setState({promocionId:e.target.value},t.fetchHomeStats)}},o.a.createElement("option",{value:""},this.props.intl.formatMessage({id:"".concat("app.home.index",".select-promociones-all"),defaultMessage:"".concat("app.home.index",".select-promociones-all")})),Object(I.map)(this.state.promociones,function(e){var t=e.id,a=e.name;return o.a.createElement("option",{value:t,key:"".concat("app.home.index","-promocion-").concat(t)},a)})),o.a.createElement(z.DateRangePicker,{startDate:this.state.since,startDateId:"since",endDate:this.state.until,endDateId:"until",onDatesChange:this.handleDates,focusedInput:this.state.focusedInput,onFocusChange:function(e){return t.setState({focusedInput:e})},startDatePlaceholderText:this.props.intl.formatMessage({id:"".concat("app.home.index",".desde"),defaultMessage:"".concat("app.home.index",".desde")}),endDatePlaceholderText:this.props.intl.formatMessage({id:"".concat("app.home.index",".hasta"),defaultMessage:"".concat("app.home.index",".hasta")}),enableOutsideDays:!0,isOutsideRange:function(){return!1}}))),o.a.createElement(b.d.Body,null,o.a.createElement(b.i.Row,{cards:!0,deck:!0},o.a.createElement(b.i.Col,{md:4},o.a.createElement(b.d,{key:a("promociones")},o.a.createElement(b.d.Header,null,this.props.intl.formatMessage({id:"".concat("app.home.index",".header.stats.promociones"),defaultMessage:"".concat("app.home.index",".header.stats.promociones")}),o.a.createElement("h3",{className:"number-total"},(e="promociones",Object(I.reduce)(t.state.stats[e],function(e,t){var a=Object(M.a)(t,2),n=(a[0],a[1]);return e+parseInt(n,10)},0)))),o.a.createElement(F.a,{chartType:Z.HOME.chart.chartType,data:Z.HOME.chart.charts.promociones(this.state.stats.promociones,this.props.intl),width:Z.HOME.chart.width,height:Z.HOME.chart.height,options:Z.HOME.chart.options}))),o.a.createElement(b.i.Col,{md:4,key:a("conociste")},o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,this.props.intl.formatMessage({id:"".concat("app.home.index",".header.stats.conociste"),defaultMessage:"".concat("app.home.index",".header.stats.conociste")})),o.a.createElement(F.a,{chartType:Z.HOME.chart.chartType,data:Z.HOME.chart.charts.conociste(this.state.stats.conociste,this.props.intl),width:Z.HOME.chart.width,height:Z.HOME.chart.height,options:Z.HOME.chart.options}))),o.a.createElement(b.i.Col,{md:4,key:a("counts")},o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,this.props.intl.formatMessage({id:"".concat("app.home.index",".header.stats.counts"),defaultMessage:"".concat("app.home.index",".header.stats.counts")}),o.a.createElement("h3",{className:"number-total"})),o.a.createElement(F.a,{chartType:Z.HOME.chart.chartType,data:Z.HOME.chart.charts.counts(this.state.stats.counts,this.props.intl,this.state.aplicarHistorico),width:Z.HOME.chart.width,height:Z.HOME.chart.height,options:Z.HOME.chart.options}),(this.state.stats.counts.historico>0||this.state.stats.counts.reservadas>0)&&o.a.createElement(b.a,{className:"historical-alert",type:"warning",icon:"alert-triangle"},this.props.intl.formatMessage({id:"".concat("app.home.index",".alert.historical"),defaultMessage:"".concat("app.home.index",".alert.historical")},{historico:this.state.stats.counts.historico,reservadas:this.state.stats.counts.reservadas}),o.a.createElement("br",null),o.a.createElement(b.c,{className:"btn-historical",square:!0,size:"sm",color:"warning",onClick:function(){return t.setState({aplicarHistorico:!t.state.aplicarHistorico})}},this.state.aplicarHistorico?this.props.intl.formatMessage({id:"".concat("app.home.index",".btn.historical-display"),defaultMessage:"".concat("app.home.index",".btn.historical-display")}):this.props.intl.formatMessage({id:"".concat("app.home.index",".btn.historical-hide"),defaultMessage:"".concat("app.home.index",".btn.historical-hide")})))))),o.a.createElement(b.i.Row,{cards:!0,deck:!0},o.a.createElement(b.i.Col,null,Object(I.map)(this.state.stats.ventas,function(e){return o.a.createElement(b.d,{key:"".concat("app.home.index","-promocion-").concat(e.id)},o.a.createElement(b.d.Header,null,e.pname),o.a.createElement(b.d.Body,null,o.a.createElement(b.r,null,o.a.createElement(b.r.Header,null,o.a.createElement(b.r.ColHeader,null,t.props.intl.formatMessage({id:"".concat("app.home.index",".table.col.name"),defaultMessage:"".concat("app.home.index",".table.col.name")})),o.a.createElement(b.r.ColHeader,null,t.props.intl.formatMessage({id:"".concat("app.home.index",".table.col.cantidad"),defaultMessage:"".concat("app.home.index",".table.col.cantidad")})),o.a.createElement(b.r.ColHeader,null,t.props.intl.formatMessage({id:"".concat("app.home.index",".table.col.vendidas"),defaultMessage:"".concat("app.home.index",".table.col.vendidas")})),o.a.createElement(b.r.ColHeader,null,t.props.intl.formatMessage({id:"".concat("app.home.index",".table.col.percent"),defaultMessage:"".concat("app.home.index",".table.col.percent")}))),o.a.createElement(b.r.Body,null,Object(I.map)(e.inmuebles,function(t){return o.a.createElement(b.r.Row,{key:"".concat("app.home.index","-inmueble-").concat(e.id,"-").concat(t.id)},o.a.createElement(b.r.Col,null,t.name),o.a.createElement(b.r.Col,null,t.cantidad),o.a.createElement(b.r.Col,null,t.vendidas),o.a.createElement(b.r.Col,null,Object(I.round)(100*t.vendidas/t.cantidad),"%"))})))))})))))}}]),a}(n.Component);te.defaultProps={};var ae=Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(te)),ne=a(193),oe=a(194),se={DISPLAY_LOADING:"DISPLAY_LOADING",HIDE_LOADING:"HIDE_LOADING"},ie=(a(340),{LOADING:{COLOR:"#ffed00"}});var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{display:!1};switch((arguments.length>1?arguments[1]:void 0).type){case se.HIDE_LOADING:return Object(g.a)(Object(g.a)({},e),{},{display:!1});case se.DISPLAY_LOADING:return Object(g.a)(Object(g.a)({},e),{},{display:!0});default:return e}},re={color:Object(g.a)(Object(g.a)({},ie),O.a).LOADING.COLOR},le=function(e){var t=e.color;return o.a.createElement("div",{id:"loading"},o.a.createElement("div",{id:"loading-center"},o.a.createElement("div",{id:"loading-center-absolute"},o.a.createElement("figure",{className:"fa-5x",style:{color:t}},o.a.createElement(ne.a,{icon:oe.a,spin:!0})))))};le.defaultProps=re;var ue=le,de=(a(341),{LOGIN:{defaults:{errors:{email:"",password:""}}}}),pe=Object(g.a)(Object(g.a)({},de),O.a),me=a(20),fe="app.login.index";var he={handleChange:function(e,t){var a=e.target.value;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},Object(me.a)({},t,a)),errors:Object(g.a)(Object(g.a)({},e.errors),{},Object(me.a)({},t,pe.LOGIN.defaults.errors[t]))})})},onSubmit:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1],e.preventDefault(),this.validate(function(e){e&&t.props.fetchLogin(t.state.values,function(e){e&&t.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{alert:Object(g.a)(Object(g.a)({},t.alert),{},{display:!0,message:e.message})})})})})},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=this.state.values,a=Object(g.a)(Object(g.a)({},this.state),{},{errors:Object(g.a)({},pe.LOGIN.defaults.errors)}),n=!0;""!==t.email&&/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/gim.test(t.email)||(a.errors.email=this.props.intl.formatMessage({id:"".concat(fe,".form.err.email"),defaultMessage:"".concat(fe,".form.err.email")}),n=!1),""===t.password&&(a.errors.password=this.props.intl.formatMessage({id:"".concat(fe,".form.err.password"),defaultMessage:"".concat(fe,".form.err.password")}),n=!1),this.setState(a,function(){return e(n)})}},ve=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={alert:{display:!1,message:""},errors:{email:"",password:""},values:{email:"",password:""}},Object(I.each)(he,function(e,t){return n[t]=he[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.alert,s=t.errors,i=t.values;return o.a.createElement(n.Fragment,null,o.a.createElement(b.q,null,o.a.createElement(b.g,{buttonText:this.props.intl.formatMessage({id:"".concat("app.login.index",".btn.submit"),defaultMessage:"".concat("app.login.index",".btn.submit")}),title:this.props.intl.formatMessage({id:"".concat("app.login.index",".title"),defaultMessage:"".concat("app.login.index",".title")}),onSubmit:this.onSubmit,method:"post"},a.display&&o.a.createElement(b.a,{type:"danger",icon:"alert-triangle"},a.message),o.a.createElement(b.h,{name:"email",label:this.props.intl.formatMessage({id:"".concat("app.login.index",".label.email"),defaultMessage:"".concat("app.login.index",".label.email")}),placeholder:this.props.intl.formatMessage({id:"".concat("app.login.index",".placeholder.email"),defaultMessage:"".concat("app.login.index",".placeholder.email")}),onChange:function(t){return e.handleChange(t,"email")},value:i&&i.email,error:s&&s.email}),o.a.createElement(b.h,{name:"password",type:"password",label:this.props.intl.formatMessage({id:"".concat("app.login.index",".label.password"),defaultMessage:"".concat("app.login.index",".label.password")}),onChange:function(t){return e.handleChange(t,"password")},value:i&&i.password,error:s&&s.password}))))}}]),a}(n.Component);ve.defaultProps={};var be=Object(p.c)(Object(c.b)(function(e){return{}},function(e){return Object(r.b)({fetchLogin:P},e)})(ve)),ge=(a(342),{TABLE:{}}),Ee=Object(g.a)(Object(g.a)({},ge),O.a),Oe=a(195),je=a.n(Oe);var ye={catchReturn:function(e){"Enter"===e.key&&this.fetch()},clearFilterVisitas:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{promocion_id:"",offset:0,query:"",status:"",filterVisitas:Object(g.a)(Object(g.a)({},e.filterVisitas),{},{since:q()("2019-01-01"),until:q()()})})},this.fetch)},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a="".concat(this.props.url,"?offset=").concat(this.state.offset,"&limit=").concat(this.props.limit);return""!==this.state.query&&(a+="&query=".concat(this.state.query)),this.props.visitas&&""!==this.state.promocion_id&&(a+="&promocion=".concat(this.state.promocion_id)),this.props.visitas&&""!==this.state.status&&(a+="&status=".concat(this.state.status)),this.props.visitas&&!Object(I.isNull)(this.state.filterVisitas.since)&&Object(I.isObject)(this.state.filterVisitas.since)&&(a+="&since=".concat(this.state.filterVisitas.since.format("YYYY-MM-DD"))),this.props.visitas&&!Object(I.isNull)(this.state.filterVisitas.until)&&Object(I.isObject)(this.state.filterVisitas.until)&&(a+="&until=".concat(this.state.filterVisitas.until.format("YYYY-MM-DD"))),this.props.isPromociones&&(a+="&active=".concat(this.state.filterPromociones.active?1:0)),Ee.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{loading:!1,results:Object(I.chain)(a.data.data.results).map(function(e){return Object(g.a)(Object(g.a)({},e),{},{selected:!1})}).keyBy("id").value(),pagination:a.data.data.pagination})},function(){return t(null,a.data)})}).catch(function(e){return t(e)})},handleActive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};return this.handleBoolean(e,"active",t)},handleFilterPromociones:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{filterPromociones:Object(g.a)(Object(g.a)({},e.filterPromociones),{},{active:!e.filterPromociones.active})})},this.fetch)},handleDates:function(e){var t=e.startDate,a=e.endDate;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{filterVisitas:Object(g.a)(Object(g.a)({},e.filterVisitas),{},{since:t,until:a})})},this.fetch)},handleBoolean:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},o=this.props.url;return Ee.DEBUG&&console.log(o),x.a.put(o,Object(me.a)({id:e.id},t,e[t]?0:1),{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(o){if(console.log({response:o}),200!==o.status&&204!==o.status)return n(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(o.status)));a.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{results:Object(g.a)(Object(g.a)({},a.results),{},Object(me.a)({},e.id,Object(g.a)(Object(g.a)({},a.results[e.id]),{},Object(me.a)({},t,!a.results[e.id][t]))))})},function(){return n(null,o.data)})}).catch(function(e){return n(e)})},handleDelete:function(){var e=this;if(!Object(I.isNull)(this.state.modal.candidate)&&this.state.modal.candidate.id){var t="".concat(this.props.url,"/").concat(this.state.modal.candidate.id);return Ee.DEBUG&&console.log(t),x.a.delete(t,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(t){e.fetch(e.hideModal)}).catch(function(e){console.error(e)})}},handleHome:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};return this.handleBoolean(e,"home",t)},handleOffset:function(e){this.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{loading:!0,results:{},offset:e})},this.fetch)},handleQuery:function(e){var t=e.target.value;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{query:t})})},handleSelect:function(e){this.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{results:Object(g.a)(Object(g.a)({},t.results),{},Object(me.a)({},e.id,Object(g.a)(Object(g.a)({},t.results[e.id]),{},{selected:!t.results[e.id].selected})))})})},handleSuperuser:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};return this.handleBoolean(e,"superuser",t)},hideFilterVisitas:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{filterVisitas:Object(g.a)(Object(g.a)({},e.filterVisitas),{},{display:!1})})})},hideModal:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{modal:Object(g.a)(Object(g.a)({},e.modal),{},{display:!1,candidate:null})})})},onMount:function(){this.fetch(),this.props.visitas&&this.fetchPromociones()},requestExcel:function(e){var t=[];return""!==this.state.query&&t.push("query=".concat(this.state.query)),this.props.visitas&&""!==this.state.promocion_id&&t.push("promocion=".concat(this.state.promocion_id)),this.props.visitas&&""!==this.state.status&&t.push("status=".concat(this.state.status)),e=t.length?"".concat(e,"?").concat(t.join("&")):e,Ee.DEBUG&&console.log(e),x.a.get(e,{responseType:"blob",headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){je()(e.data,"visitas.xlsx")}).catch(console.log)},showFilterVisitas:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{filterVisitas:Object(g.a)(Object(g.a)({},e.filterVisitas),{},{display:!0})})})},showModal:function(e){this.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{modal:Object(g.a)(Object(g.a)({},t.modal),{},{display:!0,candidate:e})})})},urlFor:function(e,t){var a=e,n=a.indexOf(":");return-1===n?a:(a=e.substr(0,n-1),Object(I.each)(e.substr(n+1).split("/:"),function(n){var o="?"===n.substr(-1)?{optional:!0,value:n.substr(0,n.length-1)}:{optional:!1,value:n};Object(I.isUndefined)(t[o.value])||Object(I.isNull)(t[o.value])?!o.optional&&Ee.DEBUG&&console.error("".concat(n," is required for ").concat(e,", params: ").concat(JSON.stringify(t))):a+="/".concat(t[o.value])}),a)}},Me=(a(343),Object(g.a)(Object(g.a)({},y),X));Me.RESERVAS={url:"".concat(Me.API_DOMAIN,"/api/reservas")},Me.VISITAS={tiposInmuebles:{url:"".concat(Me.API_DOMAIN,"/api/promociones/<%= id %>"),cases:{1:"1HAB",2:"2HAB",3:"3HAB",4:"4HAB",5:"Garaje",6:"Trasteros",7:"Locales",8:"5HAB"}},tableList:{url:"".concat(Me.API_DOMAIN,"/api/visitas"),i18nKey:"app.visitas.index",limit:Me.DEFAULT.TABLE_LIMIT,addUrl:Me.PATHS.visitas_anadir,editUrl:Me.PATHS.visitas_editar,excelUrl:"".concat(Me.API_DOMAIN,"/api/excel"),columns:{defaults:{src:function(e,t){return e[t]},type:"string",i18n:function(e){return e.key}},payload:[{key:"promocion",src:function(e){return""!==e.promo1&&""!==e.promo2&&null!==e.promo2?"".concat(e.promo1,", ").concat(e.promo2):e.promo1}},{key:"name",src:function(e){return""!==e.name&&""!==e.apellido_1?"".concat(e.apellido_1,", ").concat(e.name):""!==e.name?e.name:e.apellido_1}},{key:"status",src:function(e,t,a){return a.formatMessage({id:"app.visitas.form.status.".concat(e[t]),defaultMessage:"app.visitas.form.status.".concat(e[t])})}},{key:"telefono"},{key:"comercial"},{key:"deleted",type:"boolean"},{key:"fecha_visita",src:function(e,t){return q()(e[t]).format(Me.DEFAULT.DATE_FORMAT)}}]},selected:!0,visitas:!0},constactado:[{key:"mail"},{key:"phone"},{key:"no"}],statuses:[{key:"primera"},{key:"reserva"},{key:"anulacion"},{key:"compra"}],conociste:["cono","ddnava","ddnavc","ddnot","fotoc","ideal","lista","pisos","valla","oficina","web"]},Me.VISITAS.tableList.columns.payload=Object(I.map)(Me.VISITAS.tableList.columns.payload,function(e){return Object(g.a)(Object(g.a)({},Me.VISITAS.tableList.columns.defaults),e)});var _e=Object(g.a)(Object(g.a)({},Me),y),Se="app.visitas.form";var Ae={candidatosReserva:function(){var e=this,t=this.state.promociones,a=[];return Object(I.isEmpty)(t)?[]:(Object(I.each)([1,2],function(n){var o=t[e.state.values["promociones_id_".concat(n)]];Object(I.each)(e.state.values["tipos_inmuebles_".concat(n)],function(e){a.push({promocion:o,tipo:{id:e,name:_e.VISITAS.tiposInmuebles.cases[e]||"please updated configuration file for ".concat(e)}})})}),a)},catchReturn:function(e){var t=this;if("Enter"===e.key){var a="".concat(_e.VISITAS.tableList.url,"?telefono=").concat(this.state.values.telefono,"&limit=1");return _e.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){var a=Object(g.a)(Object(g.a)({},t.state),{},{search:!0});if(e.data.data.results.length>0){var n=Object(I.first)(e.data.data.results);a=Object(g.a)(Object(g.a)({},a),{},{values:Object(g.a)(Object(g.a)({},a.values),{},{name:n.name,email:n.email,telefono:n.telefono})})}t.setState(Object(g.a)({},a))}).catch(function(e){t.setState({search:!0})})}},didMout:function(){var e=this,t=this.state.values.id;t&&(this.setState({loading:!0}),this.fetchVisita(t,function(){e.setState({loading:!1})})),this.fetchPromociones()},displayAlert:function(e,t){this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{alert:Object(g.a)(Object(g.a)({},a.alert),{},{display:!0,type:t,message:e})})})},displayError:function(e){return this.displayAlert(e,"danger")},displaySuccess:function(e){return this.displayAlert(e,"success")},fetchPromociones:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a="".concat(_e.PROMOCIONES.tableList.url,"?limit=100&active=1");return _e.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{promociones:Object(I.chain)(a.data.data.results).map(function(e){return Object(g.a)(Object(g.a)({},e),{},{inmuebles:[]})}).orderBy("name","desc").keyBy("id").value()})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},fetchTiposInmuebles:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},n=Object(I.template)(_e.VISITAS.tiposInmuebles.url)({id:e});return _e.DEBUG&&console.log(n),x.a.get(n,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(n){if(200!==n.status&&204!==n.status)return a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(n.status)));t.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{promociones:Object(g.a)(Object(g.a)({},t.promociones),{},Object(me.a)({},e,Object(g.a)(Object(g.a)({},t.promociones[e]),{},{inmuebles:n.data.data.inmuebles||[]})))})},function(){return a(null,n.data.data)})}).catch(function(e){return a(e)})},fetchVisita:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},n="".concat(_e.VISITAS.tableList.url,"/").concat(e);return _e.DEBUG&&console.log(n),x.a.get(n,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&204!==e.status)return a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status)));var n=e.data.data;t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},{name:n.name,apellido_1:n.apellido_1,apellido_2:n.apellido_2,email:n.email,telefono:n.telefono,promociones_id_1:n.promociones_id_1,promociones_id_2:n.promociones_id_2,tipos_inmuebles_1:n.tipos_inmuebles_1,tipos_inmuebles_2:n.tipos_inmuebles_2,observaciones:n.observaciones,fecha_visita:n.fecha_visita,conociste:n.conociste,status:n.status,users_id:parseInt(n.users_id,10),contactado:n.contactado}),reserva:Object(g.a)(Object(g.a)({},e.reserva),{},{data:n.reserva})})},function(){return a(null,e.data)}),n.promociones_id_1&&t.fetchTiposInmuebles(n.promociones_id_1),n.promociones_id_2&&t.fetchTiposInmuebles(n.promociones_id_2)}).catch(function(e){return a(e)})},handleDeleteVenta:function(e,t){var a=this;e.preventDefault();var n="".concat(_e.RESERVAS.url,"/").concat(t);return _e.DEBUG&&console.log(n),x.a.delete(n,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){a.fetchVisita(a.state.values.id)}).catch(function(e){console.error(e)})},handleInmuebles:function(e,t){var a=this.state.values[t];-1===a.indexOf(e)?a.push(e):a=Object(I.remove)(a,e),this.setValue(t,a)},handlePromocion:function(e,t){var a=e.target.value;this.fetchTiposInmuebles(a),this.setValue(t,a),this.setValue("promociones_id_1"===t?"tipos_inmuebles_1":"tipos_inmuebles_2",[])},handleValues:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},n=e.target.value;this.setValue(t,n,a)},hideModalReservas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{reserva:Object(g.a)(Object(g.a)({},e.reserva),{},{modal:Object(g.a)(Object(g.a)({},e.reserva.modal),{},{display:!1})})})},e)},selectReserva:function(e){this.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{reserva:Object(g.a)(Object(g.a)({},t.reserva),{},{candidate:e})})})},setValue:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{values:Object(g.a)(Object(g.a)({},a.values),{},Object(me.a)({},e,t))})},a)},showModalReservas:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{reserva:Object(g.a)(Object(g.a)({},e.reserva),{},{modal:Object(g.a)(Object(g.a)({},e.reserva.modal),{},{display:!0})})})})},submit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};e.preventDefault(),this.validate(function(){var e=Object(g.a)(Object(g.a)({},t.state.values),{},{fecha_visita:q()(t.state.values.fecha_visita).format("YYYY-MM-DD")}),n=_e.VISITAS.tableList.url;return _e.DEBUG&&console.log(n),x()({method:t.state.values.id?"put":"post",url:n,data:e,headers:{Authorization:"Bearer ".concat(t.props.session.authToken),"Content-Type":"application/json"}}).then(function(n){if(200!==n.status&&204!==n.status)return a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(n.status)));if(n.data.error)return t.displayError(n.data.message);t.displaySuccess(t.props.intl.formatMessage({id:"".concat(Se,".submit.success"),defaultMessage:"".concat(Se,".submit.success")},{timeout:t.state.redirect.timeout}));var o=function(){window.scrollTo(0,0),setTimeout(function(){t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{redirect:Object(g.a)(Object(g.a)({},e.redirect),{},{enabled:!0})})})},1e3*t.state.redirect.timeout)};if("reserva"===e.status&&Object(I.isEmpty)(t.state.reserva.data))return t.submitReserva(n.data.data.id,function(e){e||o()});o()}).catch(function(e){return a(e)})})},submitReserva:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},n={tipos_inmuebles_id:parseInt(this.state.reserva.candidate.tipo.id,10),promociones_id:parseInt(this.state.reserva.candidate.promocion.id,10),visitas_id:parseInt(e,10)},o=_e.RESERVAS.url;return _e.DEBUG&&console.log(o,n),x()({method:"post",url:o,data:n,headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){return 200!==e.status&&204!==e.status?a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status))):e.data.error?t.displayError(e.data.message):void a(null)}).catch(function(e){return a(e)})},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=this.state,a=t.values,n=t.reserva,o=Object(g.a)(Object(g.a)({},this.state),{},{errors:{apellido_1:"",email:"",telefono:"",promociones_id_1:"",fecha_visita:""}}),s=!0;""===a.apellido_1&&(o.errors.apellido_1=this.props.intl.formatMessage({id:"".concat(Se,".err.apellido_1"),defaultMessage:"".concat(Se,".err.apellido_1")}),s=!1),""!==a.email&&/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/gim.test(a.email)||(o.errors.email=this.props.intl.formatMessage({id:"".concat(Se,".err.email"),defaultMessage:"".concat(Se,".err.email")}),s=!1),""===a.telefono&&(o.errors.telefono=this.props.intl.formatMessage({id:"".concat(Se,".err.telefono"),defaultMessage:"".concat(Se,".err.telefono")}),s=!1),""!==a.promociones_id_1&&0!==a.tipos_inmuebles_1.length||(o.errors.promociones_id_1=this.props.intl.formatMessage({id:"".concat(Se,".err.promociones_id"),defaultMessage:"".concat(Se,".err.promociones_id")}),s=!1),""===a.fecha_visita&&(o.errors.fecha_visita=this.props.intl.formatMessage({id:"".concat(Se,".err.fecha_visita"),defaultMessage:"".concat(Se,".err.fecha_visita")}),s=!1),"reserva"===a.status&&Object(I.isEmpty)(n.candidate.promocion)&&s&&Object(I.isEmpty)(n.data)&&(o.reserva.modal.display=!0,s=!1),this.setState(o,function(){return s?e():null})},vendido:function(e,t){var a=this;e.preventDefault();var n="".concat(_e.RESERVAS.url,"/").concat(t);return _e.DEBUG&&console.log(n),x.a.put(n,{visita_id:this.state.values.id},{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){a.fetchVisita(a.state.values.id)}).catch(function(e){console.error(e)})}},xe=function(e){var t,a=e.i18nKey,n=e.column,s=e.column,i=s.src,c=s.key,r=s.i18n,l=e.intl,u=e.obj,d=i(u,c,l);if("boolean"===e.column.type){return"superuser"===c?o.a.createElement("span",null,o.a.createElement(b.k,{name:"award",className:"".concat(d?"success":"danger"),onClick:e.handleSuperuser})):"deleted"===c?o.a.createElement("span",null,o.a.createElement(b.k,{name:"trash",onClick:e.showModal})):"home"===c?o.a.createElement("span",null,o.a.createElement(b.k,{prefix:"fe",name:"".concat(d?"toggle-right":"toggle-left"),className:"".concat(d?"success":"danger"),onClick:e.handleHome})):(t=d?l.formatMessage({id:"".concat(a,".column.").concat(r(n),".true"),defaultMessage:"".concat(a,".column.").concat(r(n),".true")}):l.formatMessage({id:"".concat(a,".column.").concat(r(n),".false"),defaultMessage:"".concat(a,".column.").concat(r(n),".false")}),o.a.createElement(b.b,{color:"".concat(d?"success":"danger"),className:"mr-1"},o.a.createElement("span",{onClick:"active"===c?e.handleActive:function(){return null}},t)))}return n.src(u,n.key,l)};xe.defaultProps={};var Ie=Object(p.c)(xe),Te=function(e){var t=e.intl,a=e.status,n=e.onChange;return o.a.createElement(b.f.Select,{className:"input-options select-promociones",value:a,onChange:n},o.a.createElement("option",null),Object(I.map)(_e.VISITAS.statuses,function(e){var a=e.key;return o.a.createElement("option",{value:a,key:"".concat("app.visitas.form","-stats-").concat(a)},t.formatMessage({id:"".concat("app.visitas.form",".status.").concat(a),defaultMessage:"".concat("app.visitas.form",".status.").concat(a)}))}))};Te.defaultProps={};var Ce=Object(p.c)(Te),ke=function(e){var t=e.intl,a=e.onClick,s=e.current,i=e.delta,c=e.last,r=e.name;if(Object(I.isUndefined)(c)||1===c)return null;var l=function(){var e,t=[],a=[];t.push(1);for(var n=s-i;n<=s+i;n++)n<c&&n>1&&t.push(n);1!==c&&t.push(c);for(var o=0,r=t;o<r.length;o++){var l=r[o];e&&(l-e===2?a.push({value:e+1,txt:e+1,className:["page-link","pointer"]}):l-e!==1&&a.push({txt:"&hellip;",className:["pagination-ellipsis","page-link"]})),a.push({value:l,txt:l,className:["page-link","pointer"]}),e=l}return a}();return o.a.createElement(n.Fragment,null,o.a.createElement("nav",{role:"navigation","aria-label":"pagination"},o.a.createElement("ul",{className:"pagination"},o.a.createElement("li",{className:"page-item ".concat(1===s?"disabled":"")},o.a.createElement("span",{className:"page-link pointer",onClick:function(){return a(s-2)}},t.formatMessage({id:"".concat("app.accounts-list.pagination",".previous"),defaultMessage:"".concat("app.accounts-list.pagination",".previous")}))),l.map(function(e,n){var i=e.txt,c=e.className,l=e.value,u=void 0===l?null:l,d=!Object(I.isNull)(u),p=c,m=d?"pagination-".concat(r,"-").concat(c,"-value-").concat(u):"pagination-".concat(r,"-").concat(c,"-index-").concat(n),f=u===s;return f&&p.push("active"),d?o.a.createElement("li",{className:"page-item ".concat(f?"active":""),key:m},o.a.createElement("span",{className:p?p.join(" "):"",onClick:function(){return a(u-1)},"aria-label":f?t.formatMessage({id:"".concat("app.accounts-list.pagination",".goto-page"),defaultMessage:"Goto page {value, number}"},{value:u}):t.formatMessage({id:"".concat("app.accounts-list.pagination",".page"),defaultMessage:"Page {value, number}"},{value:u}),"aria-current":!!f&&"page"},i)):o.a.createElement("li",{className:"page-item disabled",key:m},o.a.createElement("span",{className:c.join(" "),dangerouslySetInnerHTML:{__html:i}}))}),o.a.createElement("li",{className:"page-item ".concat(s===c?"disabled":"")},o.a.createElement("span",{className:"page-link pointer",onClick:function(){return a(s)}},t.formatMessage({id:"".concat("app.accounts-list.pagination",".next-page"),defaultMessage:"".concat("app.accounts-list.pagination",".next-page")}))))))};ke.defaultProps={onClick:function(e){return console.log(e)},delta:2,name:"app.accounts-list.pagination"};var Ne=Object(p.c)(ke),Pe=(a(344),Object(g.a)({},O.a));Pe.ENVIOS={templates:{url:"".concat(Pe.API_DOMAIN,"/api/mail/templates")},mails:{url:"".concat(Pe.API_DOMAIN,"/api/mail/send")},newsletter:{url:"".concat(Pe.API_DOMAIN,"/api/mail/newsletter")}};var De=Pe,Le="app.envios.index";var Re={close:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};this.handleModal(e,[],!1,t,!1)},displayAlert:function(e,t){this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{alert:{display:!0,type:t,message:e}})})},displayError:function(e){return this.displayAlert(e,"danger")},displaySuccess:function(e){return this.displayAlert(e,"success")},fetchTemplates:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=De.ENVIOS.templates.url;return De.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return e.displayError("Status erros in fetchStats expected 200 or 204 received ".concat(a.status));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{templates:Object(I.keyBy)(a.data.data,"id")})},function(){return t(null,a.data.data)})}).catch(function(t){return e.displayError(t.message)})},handleConfirm:function(){var e={to:Object(I.map)(this.state.candidates,"email"),template:this.state.template},t=De.ENVIOS.mails.url;return this.handleSend(t,e)},handleSend:function(e,t){var a=this;return De.DEBUG&&console.log(e,JSON.stringify(t)),x.a.post(e,t,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){return 200!==e.status&&204!==e.status?a.displayError("Status erros in fetchStats expected 200 or 204 received ".concat(e.status)):a.displaySuccess(a.props.intl.formatMessage({id:"".concat(Le,".alert.success"),defaultMessage:"".concat(Le,".alert.success")}))}).catch(function(e){return a.displayError(e.message)})},handleTemplate:function(e){var t=e.target.value;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{template:t})})},handleModal:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return null},o=arguments.length>4?arguments[4]:void 0;e.preventDefault(),this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{template:"",candidates:t,display:a,newsletter:o,alert:Object(g.a)(Object(g.a)({},e.alert),{},{display:!1})})},n)},handleNewsletter:function(){var e={template:this.state.template},t=De.ENVIOS.newsletter.url;return this.handleSend(t,e)},open:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.fetchTemplates(function(){return t.handleModal(new Event("click"),e,!0,function(){return null},a)})}},we="app.envios.index.hoc";var Ve=function(e){var t=function(t){Object(H.a)(s,t);var a=Object(G.a)(s);function s(e){var t;return Object(V.a)(this,s),(t=a.call(this,e)).state={alert:{display:!1,type:"success",message:""},candidates:[],cb:function(){return null},display:!1,templates:{},template:"",newsletter:!1},Object(I.map)(Re,function(e,a){return t[a]=Re[a].bind(Object(B.a)(t))}),t}return Object(U.a)(s,[{key:"render",value:function(){var t=this.props.intl,a=this.state,s=a.alert,i=a.display,c=a.newsletter,r=Object(I.size)(this.state.candidates);return o.a.createElement(n.Fragment,null,i&&o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t.formatMessage({id:"".concat(we,".modal.title"),defaultMessage:"".concat(we,".modal.title")})),o.a.createElement("button",{type:"button",onClick:this.close,className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"}))),o.a.createElement("div",{className:"modal-body"},s.display&&o.a.createElement(b.a,{type:s.type,icon:"alert-triangle"},s.message),o.a.createElement("p",null,function(){switch(r){case 0:return o.a.createElement(b.a,{type:"danger",icon:"alert-triangle"},t.formatMessage({id:"".concat(we,".modal.body.zero"),defaultMessage:"".concat(we,".modal.body.zero")}));case 1:return t.formatMessage({id:"".concat(we,".modal.body.one"),defaultMessage:"".concat(we,".modal.body.one")});default:return t.formatMessage({id:"".concat(we,".modal.body.many"),defaultMessage:"".concat(we,".modal.body.many")})}}()),o.a.createElement(b.f.Group,{label:this.props.intl.formatMessage({id:"".concat(we,".select.template"),defaultMessage:"".concat(we,".select.template")})},o.a.createElement(b.f.Select,{value:this.state.template,onChange:this.handleTemplate},o.a.createElement("option",null),Object(I.map)(this.state.templates,function(e){return o.a.createElement("option",{key:"".concat(we,"-select-").concat(e.id),value:e.id},e.value)})))),o.a.createElement("div",{className:"modal-footer"},""!==this.state.template||c&&0!==r?o.a.createElement("button",{type:"button",onClick:c?this.handleNewsletter:this.handleConfirm,className:"btn btn-primary"},t.formatMessage({id:"".concat(we,".modal.confirm"),defaultMessage:"".concat(we,".modal.confirm")})):o.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-primary"},t.formatMessage({id:"".concat(we,".modal.confirm"),defaultMessage:"".concat(we,".modal.confirm")})),o.a.createElement("button",{type:"button",onClick:this.close,className:"btn btn-secondary","data-dismiss":"modal"},t.formatMessage({id:"".concat(we,".modal.close"),defaultMessage:"".concat(we,".modal.close")})))))),o.a.createElement("div",{className:"modal-backdrop fade show"})),o.a.createElement(e,Object.assign({modalEnvios:{open:this.open}},this.props,this.state)))}}]),s}(n.Component);return t.defaultProps={},Object(p.c)(Object(c.b)(function(e){return{session:e.session}})(t))},Ue={addUrl:null,editUrl:null,excelUrl:null,i18nKey:"app.table-list.index",isPromociones:!1,selected:!1,visitas:!1},Be=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={loading:!0,promocion_id:"",promociones:[],offset:0,query:"",pagination:{},results:{},status:"",modal:{candidate:null,display:!1},filterPromociones:{active:!0},filterVisitas:{display:!1,since:q()("2019-01-01"),until:q()()},focusedInput:null},Object(I.each)(ye,function(e,t){return n[t]=ye[t].bind(Object(B.a)(n))}),n.fetchPromociones=Ae.fetchPromociones.bind(Object(B.a)(n)),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.onMount()}},{key:"render",value:function(){var e=this,t=this.props,a=t.addUrl,s=t.excelUrl,i=t.editUrl,c=t.intl,r=t.columns,l=t.i18nKey,u=t.isPromociones,d=t.selected,p=t.visitas,f=this.state,h=f.filterPromociones,v=f.filterVisitas,g=f.loading,E=f.offset,O=f.modal,j=f.results,y=f.pagination,M=f.promocion_id,_=f.promociones,S=f.query,A=f.status,x=Object(I.filter)(j,"selected"),T=Object(I.size)(x),C=function(t){return o.a.createElement(b.d,null,v.display&&o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},c.formatMessage({id:"".concat(l,".filter-visitas.title"),defaultMessage:"".concat(l,".filter-visitas.title")})),o.a.createElement("button",{type:"button",onClick:e.hideFilterVisitas,className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"}))),o.a.createElement("div",{className:"modal-body"},o.a.createElement(b.f.Group,{label:c.formatMessage({id:"".concat(l,".filter-visitas.buscar"),defaultMessage:"".concat(l,".filter-visitas.buscar")})},o.a.createElement(b.f.Input,{icon:"search",placeholder:c.formatMessage({id:"".concat(l,".filter-visitas.buscar"),defaultMessage:"".concat(l,".filter-visitas.buscar")}),position:"append",value:S,onChange:e.handleQuery,onKeyPress:e.catchReturn})),o.a.createElement(b.f.Group,{label:c.formatMessage({id:"".concat(l,".filter-visitas.promociones"),defaultMessage:"".concat(l,".filter-visitas.promociones")})},o.a.createElement(b.f.Select,{className:"input-options select-promociones is-fullwidth",value:M,onChange:function(t){return e.setState({promocion_id:t.target.value},e.fetch)}},o.a.createElement("option",null),Object(I.map)(_,function(e){var t=e.id,a=e.name;return o.a.createElement("option",{value:t,key:"".concat(l,"-promocion-").concat(t)},a)}))),o.a.createElement(b.f.Group,{label:c.formatMessage({id:"".concat(l,".filter-visitas.status"),defaultMessage:"".concat(l,".filter-visitas.status")})},o.a.createElement(Ce,{status:A,onChange:function(t){return e.setState({status:t.target.value},e.fetch)}})),o.a.createElement(b.f.Group,{label:c.formatMessage({id:"".concat(l,".filter-visitas.fechas"),defaultMessage:"".concat(l,".filter-visitas.fechas")})},o.a.createElement(z.DateRangePicker,{startDate:e.state.filterVisitas.since,startDateId:"since",endDate:e.state.filterVisitas.until,endDateId:"until",onDatesChange:e.handleDates,focusedInput:e.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},startDatePlaceholderText:e.props.intl.formatMessage({id:"".concat(l,".desde"),defaultMessage:"".concat(l,".desde")}),endDatePlaceholderText:e.props.intl.formatMessage({id:"".concat(l,".hasta"),defaultMessage:"".concat(l,".hasta")}),enableOutsideDays:!0,isOutsideRange:function(){return!1}}))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",onClick:e.hideFilterVisitas,className:"btn btn-secondary","data-dismiss":"modal"},c.formatMessage({id:"".concat(l,".filter-visitas.close"),defaultMessage:"".concat(l,".filter-visitas.close")})))))),o.a.createElement("div",{className:"modal-backdrop fade show"})),o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,c.formatMessage({id:"".concat(l,".title"),defaultMessage:"".concat(l,".title")})),o.a.createElement(b.d.Options,null,!p&&o.a.createElement(b.f.Input,{icon:"search",placeholder:c.formatMessage({id:"".concat("app.table-list.index",".buscar"),defaultMessage:"".concat("app.table-list.index",".buscar")}),position:"append",value:S,onChange:e.handleQuery,onKeyPress:e.catchReturn}),o.a.createElement(b.c.List,{align:"right"},u&&o.a.createElement(b.c,{className:"is-margin-left-15",color:h.active?"warning":"success",onClick:e.handleFilterPromociones},h.active?c.formatMessage({id:"".concat(l,".display-active"),defaultMessage:"".concat(l,".display-active")}):c.formatMessage({id:"".concat(l,".hide-active"),defaultMessage:"".concat(l,".hide-active")})),a&&o.a.createElement(m.c,{to:a,className:"btn-add"},o.a.createElement(b.c,{color:"primary"},c.formatMessage({id:"".concat(l,".nuevo"),defaultMessage:"".concat(l,".nuevo")}))),s&&o.a.createElement(b.c,{onClick:function(){return e.requestExcel(s)},color:"secundary",outline:!0},c.formatMessage({id:"".concat(l,".excel"),defaultMessage:"".concat(l,".excel")})),T>0&&o.a.createElement(b.c,{color:"secundary",icon:"mail",onClick:function(t){return e.props.modalEnvios.open(x)}},c.formatMessage({id:"".concat(l,".send"),defaultMessage:"".concat(l,".send")})),p&&o.a.createElement(b.c,{color:"secundary",icon:"mail",onClick:function(t){return e.props.modalEnvios.open([],!0)}},c.formatMessage({id:"".concat(l,".newsletter"),defaultMessage:"".concat(l,".newsletter")})),p&&o.a.createElement("button",{type:"button",onClick:e.showFilterVisitas,className:"btn btn-warning"},c.formatMessage({id:"".concat(l,".filter-visitas.filter"),defaultMessage:"".concat(l,".filter-visitas.filter")})),p&&o.a.createElement("button",{type:"button",onClick:e.clearFilterVisitas,className:"btn btn-info"},c.formatMessage({id:"".concat(l,".filter-visitas.clear"),defaultMessage:"".concat(l,".filter-visitas.clear")}))))),o.a.createElement(b.e,{active:g,loader:!0,className:"table-container"},t))};return g||0!==y.total?C(o.a.createElement(n.Fragment,null,o.a.createElement(b.r,null,o.a.createElement(b.r.Header,null,d&&o.a.createElement(b.r.ColHeader,null),Object(I.map)(r.payload,function(e){return o.a.createElement(b.r.ColHeader,{key:"".concat(l,".col-header.").concat(e.key)},c.formatMessage({id:"".concat(l,".column.").concat(e.i18n(e)),defaultMessage:"".concat(l,".column.").concat(e.i18n(e))}))}),i&&o.a.createElement(b.r.ColHeader,null,c.formatMessage({id:"".concat("app.table-list.index",".column.actions"),defaultMessage:"".concat("app.table-list.index",".column.actions")}))),o.a.createElement(b.r.Body,null,Object(I.map)(Object(I.orderBy)(j,"created_at","desc"),function(t){return o.a.createElement(b.r.Row,{key:"".concat(l,".row.").concat(t.id)},d&&o.a.createElement(b.r.Col,null,t.publicidad?o.a.createElement(b.k,{className:"select-icon",key:"".concat(l,".selected.").concat(t.id),onClick:function(){return e.handleSelect(t)},name:t.selected?"check-circle":"circle"}):o.a.createElement(b.k,{className:"select-icon disabled",key:"".concat(l,".selected.").concat(t.id),name:"alert-circle"})),Object(I.map)(r.payload,function(a){return o.a.createElement(b.r.Col,{key:"".concat(l,".col.").concat(t.id,".").concat(a.key)},o.a.createElement(Ie,{column:a,handleActive:function(){return e.handleActive(t)},handleSuperuser:function(){return e.handleSuperuser(t)},handleHome:function(){return e.handleHome(t)},showModal:function(){return e.showModal(t)},i18nKey:l,obj:t}))}),o.a.createElement(b.r.Col,null,i&&o.a.createElement(m.c,{to:e.urlFor(i,{id:t.id}),className:"btn-add"},o.a.createElement(b.c,{color:"primary",size:"sm",pill:!0},c.formatMessage({id:"".concat("app.table-list.index",".btn.edit"),defaultMessage:"".concat("app.table-list.index",".btn.edit")})))))}))),y.total>y.limit&&o.a.createElement(Ne,{current:E+1,last:Object(I.ceil)(y.total/y.limit),onClick:this.handleOffset}),O.display&&o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},c.formatMessage({id:"".concat(l,".modal.title"),defaultMessage:"".concat(l,".modal.title")})),o.a.createElement("button",{type:"button",onClick:this.hideModal,className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"}))),o.a.createElement("div",{className:"modal-body"},o.a.createElement("p",null,c.formatMessage({id:"".concat(l,".modal.body"),defaultMessage:"".concat(l,".modal.body")}))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",onClick:this.handleDelete,className:"btn btn-primary"},c.formatMessage({id:"".concat(l,".modal.delete"),defaultMessage:"".concat(l,".modal.delete")})),o.a.createElement("button",{type:"button",onClick:this.hideModal,className:"btn btn-secondary","data-dismiss":"modal"},c.formatMessage({id:"".concat(l,".modal.close"),defaultMessage:"".concat(l,".modal.close")})))))),o.a.createElement("div",{className:"modal-backdrop fade show"})))):C(o.a.createElement(b.a,{type:"info",className:"alert-no-result"},c.formatMessage({id:"".concat(l,".no-results"),defaultMessage:"".concat(l,".no-results")})))}}]),a}(n.Component);Be.defaultProps=Ue;var He=Ve(Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(Be))),Ge=function(e){return o.a.createElement(He,X.PROMOCIONES.tableList)};Ge.defaultProps={};var Fe=Ge,ze=a(101),Ye=(a(184),a(185),a(356),"app.promociones.form");var qe={didMout:function(){var e=this,t=this.state.values.id;t&&(this.setState({loading:!0}),this.fetchPromocion(t,function(){e.setState({loading:!1})})),this.fetchInmuebles(),this.fetchZonas()},displayAlert:function(e,t){this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{alert:Object(g.a)(Object(g.a)({},a.alert),{},{display:!0,type:t,message:e})})})},displayError:function(e){return this.displayAlert(e,"danger")},displaySuccess:function(e){return this.displayAlert(e,"success")},fetchInmuebles:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a="".concat(X.TIPOS_INMUEBLE.tableList.url,"?limit=100");return X.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{inmuebles:a.data.data.results})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},fetchPromocion:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},n="".concat(X.PROMOCIONES.tableList.url,"?id=").concat(e);return X.DEBUG&&console.log(n),x.a.get(n,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&204!==e.status)return a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status)));var n=Object(I.first)(e.data.data.results);t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},{name:n.name,zona:n.zona,historico:{reserva:Object(I.chain)(n.historico.reserva).keyBy("id").mapValues("cantidad").value(),venta:Object(I.chain)(n.historico.venta).keyBy("id").mapValues("cantidad").value()},inmuebles:Object(I.chain)(n.inmuebles).keyBy("id").mapValues("cantidad").value()})})},function(){return a(null,e.data)})}).catch(function(e){return a(e)})},fetchZonas:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=X.PROMOCIONES.zonas.url;return X.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{zonas:a.data.data})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},handleHistorico:function(e,t,a){var n=parseInt(e.target.value,10);this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},{historico:Object(g.a)(Object(g.a)({},e.values.historico),{},Object(me.a)({},t,Object(g.a)(Object(g.a)({},e.values.historico[t]),{},Object(me.a)({},a,n))))})})})},handleInmuebles:function(e,t){var a=parseInt(e.target.value,10);this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},{inmuebles:Object(g.a)(Object(g.a)({},e.values.inmuebles),{},Object(me.a)({},t,a))})})})},handleValues:function(e,t){var a=e.target.value;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},Object(me.a)({},t,a))})})},handleZona:function(e){this.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{values:Object(g.a)(Object(g.a)({},t.values),{},{zona:e})})})},submit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};e.preventDefault();var n=Object(g.a)(Object(g.a)({},this.state.values),{},{inmuebles:Object(I.omitBy)(this.state.values.inmuebles,function(e,t){return 0===e||Object(I.isNaN)(e)}),historico:{reserva:Object(I.omitBy)(this.state.values.historico.reserva,function(e,t){return 0===e||Object(I.isNaN)(e)}),venta:Object(I.omitBy)(this.state.values.historico.venta,function(e,t){return 0===e||Object(I.isNaN)(e)})}});this.validate(function(){var e=X.PROMOCIONES.tableList.url;return X.DEBUG&&console.log(e),x()({method:t.state.values.id?"put":"post",url:e,data:n,headers:{Authorization:"Bearer ".concat(t.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){return 200!==e.status&&204!==e.status?a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status))):e.data.error?t.displayError(e.data.message):(t.displaySuccess(t.props.intl.formatMessage({id:"".concat(Ye,".submit.success"),defaultMessage:"".concat(Ye,".submit.success")},{timeout:t.state.redirect.timeout})),void setTimeout(function(){t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{redirect:Object(g.a)(Object(g.a)({},e.redirect),{},{enabled:!0})})})},1e3*t.state.redirect.timeout))}).catch(function(e){return a(e)})})},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=this.state.values,a=Object(g.a)(Object(g.a)({},this.state),{},{errors:{name:"",zona:""}}),n=!0;""===t.name&&(a.errors.name=this.props.intl.formatMessage({id:"".concat(Ye,".err.name"),defaultMessage:"".concat(Ye,".err.name")}),n=!1),""===t.zona&&(a.errors.zona=this.props.intl.formatMessage({id:"".concat(Ye,".err.zona"),defaultMessage:"".concat(Ye,".err.zona")}),n=!1),this.setState(a,function(){return n?e():null})}},Ke=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={alert:{display:!1,type:"danger",message:""},errors:{name:"",zona:""},values:{id:parseInt(e.match.params.id,10)||null,name:"",zona:"",historico:{reserva:{},venta:{}},inmuebles:{}},inmuebles:[],zonas:[],loading:!1,redirect:{enabled:!1,url:X.PATHS.configuracion.promociones,timeout:5}},Object(I.each)(qe,function(e,t){return n[t]=qe[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.didMout()}},{key:"render",value:function(){var e=this,t=this.props.intl,a=this.state,s=a.values,i=a.errors,c=a.inmuebles,r=a.alert,l=a.redirect,u=a.loading,d=a.zonas;return l.enabled?o.a.createElement(f.a,{to:l.url}):o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,s.id?t.formatMessage({id:"".concat("app.promociones.form",".title-editar"),defaultMessage:"".concat("app.promociones.form",".title-editar")}):t.formatMessage({id:"".concat("app.promociones.form",".title-anadir"),defaultMessage:"".concat("app.promociones.form",".title-anadir")}))),o.a.createElement(b.d.Body,null,r.display&&o.a.createElement(b.a,{type:r.type,icon:"alert-triangle"},r.message),o.a.createElement(b.e,{active:u,loader:!0},o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.promociones.form",".name"),defaultMessage:"".concat("app.promociones.form",".name")})},o.a.createElement(b.f.Input,{feedback:i.name,invalid:""!==i.name,value:s.name,onChange:function(t){return e.handleValues(t,"name")}})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.promociones.form",".zona"),defaultMessage:"".concat("app.promociones.form",".zona")})},o.a.createElement(ze.a,{id:"".concat("app.promociones.form","-zona-typeahead"),labelKey:"name",options:d,emptyLabel:"",maxResults:3,paginationText:t.formatMessage({id:"".concat("app.promociones.form",".zona.pagination"),defaultMessage:"".concat("app.promociones.form",".zona.pagination")}),onInputChange:this.handleZona,onChange:function(t){return e.handleZona(Object(I.first)(t))},placeholder:s.zona})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.promociones.form",".tipos-inmueble"),defaultMessage:"".concat("app.promociones.form",".tipos-inmueble")})},o.a.createElement(b.e,{active:Object(I.isEmpty)(c),loader:!0},o.a.createElement(b.i.Row,null,Object(I.map)(Object(I.chunk)(c,Object(I.ceil)(c.length/2)),function(a,i){return o.a.createElement(b.i.Col,{key:"".concat("app.promociones.form","-grid-col-input-").concat(i)},Object(I.map)(a,function(a){return o.a.createElement(n.Fragment,{key:"".concat("app.promociones.form","-input-").concat(a.id)},o.a.createElement("div",{className:"input-icon tipos-inmuebles"},o.a.createElement("span",{className:"input-icon-addon"},a.name),o.a.createElement(b.f.Input,{className:"cantidad-tipo-inmueble",name:a.id,value:s.inmuebles[a.id]||"",onChange:function(t){return e.handleInmuebles(t,a.id)},placeholder:t.formatMessage({id:"".concat("app.promociones.form",".cantidad"),defaultMessage:"".concat("app.promociones.form",".cantidad")},Object(g.a)({},a)),type:"number"})))}))})))),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.promociones.form",".historico.reservas"),defaultMessage:"".concat("app.promociones.form",".historico.reservas")})},o.a.createElement(b.e,{active:Object(I.isEmpty)(c),loader:!0},o.a.createElement(b.i.Row,null,Object(I.map)(Object(I.chunk)(c,Object(I.ceil)(c.length/2)),function(a,i){return o.a.createElement(b.i.Col,{key:"".concat("app.promociones.form","-grid-col-input-historico-").concat(i)},Object(I.map)(a,function(a){return o.a.createElement(n.Fragment,{key:"".concat("app.promociones.form","-input-").concat(a.id)},o.a.createElement("div",{className:"input-icon tipos-inmuebles"},o.a.createElement("span",{className:"input-icon-addon"},a.name),o.a.createElement(b.f.Input,{className:"cantidad-tipo-inmueble",name:a.id,value:s.historico.reserva[a.id]||"",onChange:function(t){return e.handleHistorico(t,"reserva",a.id)},placeholder:t.formatMessage({id:"".concat("app.promociones.form",".cantidad"),defaultMessage:"".concat("app.promociones.form",".cantidad")},Object(g.a)({},a)),type:"number"})))}))})))),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.promociones.form",".historico.venta"),defaultMessage:"".concat("app.promociones.form",".historico.venta")})},o.a.createElement(b.e,{active:Object(I.isEmpty)(c),loader:!0},o.a.createElement(b.i.Row,null,Object(I.map)(Object(I.chunk)(c,Object(I.ceil)(c.length/2)),function(a,i){return o.a.createElement(b.i.Col,{key:"".concat("app.promociones.form","-grid-col-input-historico-").concat(i)},Object(I.map)(a,function(a){return o.a.createElement(n.Fragment,{key:"".concat("app.promociones.form","-input-").concat(a.id)},o.a.createElement("div",{className:"input-icon tipos-inmuebles"},o.a.createElement("span",{className:"input-icon-addon"},a.name),o.a.createElement(b.f.Input,{className:"cantidad-tipo-inmueble",name:a.id,value:s.historico.venta[a.id]||"",onChange:function(t){return e.handleHistorico(t,"venta",a.id)},placeholder:t.formatMessage({id:"".concat("app.promociones.form",".cantidad"),defaultMessage:"".concat("app.promociones.form",".cantidad")},Object(g.a)({},a)),type:"number"})))}))})))))),o.a.createElement(b.d.Footer,null,o.a.createElement(b.c.List,null,o.a.createElement(b.c,{square:!0,color:"success",onClick:this.submit},t.formatMessage({id:"".concat("app.promociones.form",".save"),defaultMessage:"".concat("app.promociones.form",".save")})))))}}]),a}(n.Component);Ke.defaultProps={};var Ze=Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(Ke)),Je=Object(g.a)({},Q);Je.STATUS={url:"".concat(Je.API_DOMAIN,"/api/status_promociones"),promocion:{header:[1,2,3,4,8,5,6,7]}},Je.SCEENSHOTS={url:"".concat(Je.API_DOMAIN,"/api/sceenshots")};var Qe=Object(g.a)(Object(g.a)({},Je),Q),We="app.status-promociones.screenshot";q()().locale("es");var Xe=function(e){var t=q()().startOf("month"),a="".concat(Object(I.upperFirst)(t.format("MMMM"))," ").concat(t.format("YYYY")),s=e.bearer,i=e.displaySuccess,c=e.intl,r=Object(n.useState)(a),l=Object(M.a)(r,2),u=l[0],d=l[1],p=Object(n.useState)(),m=Object(M.a)(p,2),f=m[0],h=m[1],v=Object(n.useState)(!1),g=Object(M.a)(v,2),E=g[0],O=g[1],j=function(){d(a),h(),O(!1)};return o.a.createElement(o.a.Fragment,null,E&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},c.formatMessage({id:"".concat(We,".modal.title"),defaultMessage:"".concat(We,".modal.title")})),o.a.createElement("button",{type:"button",onClick:j,className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"}))),o.a.createElement("div",{className:"modal-body"},f&&o.a.createElement(b.a,{type:"danger",icon:"alert-triangle"},f),o.a.createElement(b.f.Input,{label:c.formatMessage({id:"".concat(We,".modal.input.name"),defaultMessage:"".concat(We,".modal.input.name")}),value:u,onChange:function(e){return d(e.target.value)}})),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",onClick:function(){h(),x.a.post(Qe.SCEENSHOTS.url,{name:u},{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}).then(function(e){200===e.status||204===e.status?e.data.error?h(e.data.message):(i(c.formatMessage({id:"".concat(We,".sucess-alert"),defaultMessage:"".concat(We,".sucess-alert")})),j()):h("Status erros in fetchStats expected 200 or 204 received ".concat(e.status))}).catch(function(e){var t=e.message;h(t)})},className:"btn btn-success","data-dismiss":"modal",disabled:!u},c.formatMessage({id:"".concat(We,".modal.save"),defaultMessage:"".concat(We,".modal.save")})),o.a.createElement("button",{type:"button",onClick:j,className:"btn btn-secondary","data-dismiss":"modal"},c.formatMessage({id:"".concat(We,".modal.close"),defaultMessage:"".concat(We,".modal.close")})))))),o.a.createElement("div",{className:"modal-backdrop fade show"})),o.a.createElement(b.c,{className:"btn-screenshot",color:"gray",icon:"upload",onClick:function(){return O(!0)}},c.formatMessage({id:"".concat(We,".btn"),defaultMessage:"".concat(We,".btn")})))};Xe.defaultProps={bearer:""};var $e=Object(p.c)(Object(c.b)(function(e){return{bearer:e.session.authToken||""}})(Xe));a(357);q()().locale("es");var et={didMount:function(){var e=this;this.fetchData(function(t){if(t)return Qe.DEBUG&&console.error(t),e.displayError(t.message),void e.setState({loading:!1});e.fetchScreenshot(function(t){if(t)return Qe.DEBUG&&console.error(t),void e.displayError(t.message);e.setState({loading:!1})})})},displayAlert:function(e,t){this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{alert:Object(g.a)(Object(g.a)({},a.alert),{},{display:!0,type:t,message:e})})})},displayError:function(e){return this.displayAlert(e,"danger")},displaySuccess:function(e){var t=this;this.displayAlert(e,"success"),setTimeout(function(){t.hideAlert()},5e3)},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=Qe.STATUS.url;return Qe.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));var n=Object(g.a)(Object(g.a)({},a.data.data),{},{promociones:Object(I.keyBy)(a.data.data.promociones,"id"),tipos_inmuebles:Object(I.keyBy)(a.data.data.tipos_inmuebles,"id"),reservas_by_month:Object(I.keyBy)(a.data.data.reservas_by_month,"promocion_id"),ventas_by_month:Object(I.keyBy)(a.data.data.ventas_by_month,"promocion_id")});e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{data:n,screenshots:Object(g.a)(Object(g.a)({},e.screenshots),{},{0:{status:n,visible:!1}})})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},fetchScreenshot:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a=Qe.SCEENSHOTS.url;return Qe.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{screenshots:Object(g.a)(Object(g.a)({},e.screenshots),Object(I.chain)(a.data.data).map(function(e){return Object(g.a)(Object(g.a)({},e),{},{label:"".concat(e.name," - ").concat(q()(e.created_at).format("D de MMMM YYYY HH:mm")),visible:!0,status:Object(g.a)(Object(g.a)({},e.status),{},{promociones:Object(I.keyBy)(e.status.promociones,"id"),tipos_inmuebles:Object(I.keyBy)(e.status.tipos_inmuebles,"id"),reservas_by_month:Object(I.keyBy)(e.status.reservas_by_month,"promocion_id"),ventas_by_month:Object(I.keyBy)(e.status.ventas_by_month,"promocion_id")})})}).keyBy("id").value())})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},handleScreenshot:function(e){var t=e.target.value,a=t||0;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{screenshot:t,data:Object(g.a)({},e.screenshots[a].status)})})},hideAlert:function(){this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{alert:Object(g.a)(Object(g.a)({},e.alert),{},{display:!1})})})}},tt=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={loading:!0,screenshots:{},data:{promociones:{},tipos_inmuebles:{},reservas:{},ventas:{},visitas:{}},alert:{display:!1,type:null,message:null},screenshot:null},Object(I.each)(et,function(e,t){return n[t]=et[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.didMount()}},{key:"render",value:function(){var e=this,t=this.props.intl,a=this.state,s=a.alert,i=a.data,c=a.loading,r=a.screenshot,l=a.screenshots,u=function(t){e.displaySuccess(t),e.fetchScreenshot()},d=function(a){return o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,r?l[r].label:t.formatMessage({id:"".concat("app.status-promociones.index",".title"),defaultMessage:"".concat("app.status-promociones.index",".title")})),o.a.createElement(b.d.Options,null,o.a.createElement($e,{displaySuccess:u}),o.a.createElement(b.f.Select,{value:r,onChange:e.handleScreenshot},o.a.createElement("option",null),Object(I.map)(Object(I.filter)(l,"visible"),function(e){return o.a.createElement("option",{key:"".concat("app.status-promociones.index","-select-").concat(e.id),value:e.id},e.label)})))),o.a.createElement(b.e,{active:c,loader:!0,className:"table-container"},s.display&&o.a.createElement(b.a,{type:s.type,icon:"alert-triangle"},s.message),a))};if(!c&&Object(I.isEmpty)(i.promociones))return d(o.a.createElement(b.a,{type:"info",className:"alert-no-result"},t.formatMessage({id:"".concat("app.status-promociones.index",".no-results"),defaultMessage:"".concat("app.status-promociones.index",".no-results")})));var p=function(e,t,a){return(i.ventas[e]&&i.ventas[e][t]?i.ventas[e][t]:0)+(a.venta[t]?a.venta[t]:0)},m=function(e,t,a){return(i.reservas[e]&&i.reservas[e][t]?i.reservas[e][t]:0)+(a.reserva&&a.reserva[t]?a.reserva[t]:0)};return d(o.a.createElement("div",{id:"status-body"},Object(I.map)(i.promociones,function(e){var a=e.id,s=e.name,c=e.inmuebles,r=e.historico,l=Object(I.reduce)(c,function(e,t){return e+t},0),u=function(e,t,a){return Object(I.reduce)(e.reservas[t]||{},function(e,t){return e+t},0)+Object(I.reduce)(a.reserva||{},function(e,t){return e+t},0)}(i,a,r),d=function(e,t,a){return Object(I.reduce)(e.ventas[t]||{},function(e,t){return e+t},0)+Object(I.reduce)(a.venta||{},function(e,t){return e+t},0)}(i,a,r);return o.a.createElement(n.Fragment,{key:"".concat("app.status-promociones.index","-promocion-").concat(a)},o.a.createElement(b.j.H4,null,s),o.a.createElement(b.r,null,o.a.createElement(b.r.Header,null,o.a.createElement(b.r.ColHeader,null),o.a.createElement(b.r.ColHeader,null,t.formatMessage({id:"".concat("app.status-promociones.index",".totales"),defaultMessage:"".concat("app.status-promociones.index",".totales")})),Object(I.map)(Qe.STATUS.promocion.header,function(e){return o.a.createElement(b.r.ColHeader,{key:"".concat("app.status-promociones.index","-header-").concat(a,"-").concat(e)},i.tipos_inmuebles[e].name)})),o.a.createElement(b.r.Body,null,o.a.createElement(b.r.Row,null,o.a.createElement(b.r.Col,null,t.formatMessage({id:"".concat("app.status-promociones.index",".viviendas-promocion"),defaultMessage:"".concat("app.status-promociones.index",".viviendas-promocion")})),o.a.createElement(b.r.Col,null,l),Object(I.map)(Qe.STATUS.promocion.header,function(e){return o.a.createElement(b.r.Col,{key:"".concat("app.status-promociones.index","-totales-").concat(a,"-").concat(e)},c[e]||0)})),o.a.createElement(b.r.Row,null,o.a.createElement(b.r.Col,null,t.formatMessage({id:"".concat("app.status-promociones.index",".viviendas-vendidas"),defaultMessage:"".concat("app.status-promociones.index",".viviendas-vendidas")})),o.a.createElement(b.r.Col,null,d),Object(I.map)(Qe.STATUS.promocion.header,function(e){return o.a.createElement(b.r.Col,{key:"".concat("app.status-promociones.index","-vendidas-").concat(a,"-").concat(e)},p(a,e,r))})),o.a.createElement(b.r.Row,null,o.a.createElement(b.r.Col,null,t.formatMessage({id:"".concat("app.status-promociones.index",".viviendas-reservadas"),defaultMessage:"".concat("app.status-promociones.index",".viviendas-reservadas")})),o.a.createElement(b.r.Col,null,u),Object(I.map)(Qe.STATUS.promocion.header,function(e){return o.a.createElement(b.r.Col,{key:"".concat("app.status-promociones.index","-reservadas-").concat(a,"-").concat(e)},m(a,e,r))})),o.a.createElement(b.r.Row,null,o.a.createElement(b.r.Col,null,t.formatMessage({id:"".concat("app.status-promociones.index",".viviendas-venta"),defaultMessage:"".concat("app.status-promociones.index",".viviendas-venta")})),o.a.createElement(b.r.Col,null,l-u-d),Object(I.map)(Qe.STATUS.promocion.header,function(e){return o.a.createElement(b.r.Col,{key:"".concat("app.status-promociones.index","-libres-").concat(a,"-").concat(e)},(c[e]||0)-p(a,e,r)-m(a,e,r))})))),o.a.createElement("hr",null))})))}}]),a}(n.Component);tt.defaultProps={};var at=Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(tt)),nt=function(e){return o.a.createElement(He,Q.TIPOS_INMUEBLE.tableList)};nt.defaultProps={};var ot=nt,st=Object(g.a)({},y);st.USUARIOS={tableList:{url:"".concat(st.API_DOMAIN,"/api/users"),i18nKey:"app.users.index",limit:st.DEFAULT.TABLE_LIMIT,addUrl:st.PATHS.configuracion.usuarios_anadir,editUrl:st.PATHS.configuracion.usuarios_editar,columns:{defaults:{src:function(e,t){return e[t]},type:"string",i18n:function(e){return e.key}},payload:[{key:"name"},{key:"email"},{key:"created_at",type:"date",src:function(e,t){return q()(e[t]).format(st.DEFAULT.DATE_TIME_FORMAT)}},{key:"last_login",type:"date",src:function(e,t){return q()(e[t]).format(st.DEFAULT.DATE_TIME_FORMAT)}},{key:"active",type:"boolean"},{key:"superuser",type:"boolean"}]}}},st.USUARIOS.tableList.columns.payload=Object(I.map)(st.USUARIOS.tableList.columns.payload,function(e){return Object(g.a)(Object(g.a)({},st.USUARIOS.tableList.columns.defaults),e)});var it=st,ct=function(e){return o.a.createElement(He,it.USUARIOS.tableList)};ct.defaultProps={};var rt=ct,lt=(a(358),"app.users.form");var ut={didMout:function(){var e=this,t=this.state.values.id;t&&(this.setState({loading:!0}),this.fetchUsuario(t,function(){e.setState({loading:!1})}))},displayAlert:function(e,t){this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{alert:Object(g.a)(Object(g.a)({},a.alert),{},{display:!0,type:t,message:e})})})},displayError:function(e){return this.displayAlert(e,"danger")},displaySuccess:function(e){return this.displayAlert(e,"success")},fetchUsuario:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},n="".concat(it.USUARIOS.tableList.url,"?id=").concat(e);return it.DEBUG&&console.log(n),x.a.get(n,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){if(200!==e.status&&204!==e.status)return a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status)));var n=Object(I.first)(e.data.data.results);t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},{name:n.name,email:n.email})})},function(){return a(null,e.data)})}).catch(function(e){return a(e)})},handleValues:function(e,t){var a=e.target.value;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},Object(me.a)({},t,a))})})},submit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};e.preventDefault(),this.validate(function(){var e=it.USUARIOS.tableList.url;it.DEBUG&&console.log(e);var n={id:t.state.values.id,name:t.state.values.name,email:t.state.values.email,password:t.state.values.password};return x()({method:t.state.values.id?"put":"post",url:e,data:n,headers:{Authorization:"Bearer ".concat(t.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){return 200!==e.status&&204!==e.status?a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status))):e.data.error?t.displayError(e.data.message):(t.displaySuccess(t.props.intl.formatMessage({id:"".concat(lt,".submit.success"),defaultMessage:"".concat(lt,".submit.success")},{timeout:t.state.redirect.timeout})),void setTimeout(function(){t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{redirect:Object(g.a)(Object(g.a)({},e.redirect),{},{enabled:!0})})})},1e3*t.state.redirect.timeout))}).catch(function(e){return a(e)})})},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=this.state.values,a=Object(g.a)(Object(g.a)({},this.state),{},{errors:{email:"",name:"",password:"",rePassword:""}}),n=!0;""===t.name&&(a.errors.name=this.props.intl.formatMessage({id:"".concat(lt,".err.name"),defaultMessage:"".concat(lt,".err.name")}),n=!1),""!==t.email&&/[A-Z0-9._%+-]+@[A-Z0-9.-]+.[A-Z]{2,4}/gim.test(t.email)||(a.errors.email=this.props.intl.formatMessage({id:"".concat(lt,".err.email"),defaultMessage:"".concat(lt,".err.email")}),n=!1),t.id&&""===t.password||((""===t.password||t.password.length<6)&&(a.errors.password=this.props.intl.formatMessage({id:"".concat(lt,".err.password"),defaultMessage:"".concat(lt,".err.password")}),n=!1),t.password!==t.rePassword&&(a.errors.rePassword=this.props.intl.formatMessage({id:"".concat(lt,".err.rePassword"),defaultMessage:"".concat(lt,".err.rePassword")}),n=!1)),this.setState(a,function(){return n?e():null})}},dt=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(V.a)(this,a),(n=t.call(this,e)).state={alert:{display:!1,type:"danger",message:""},errors:{name:"",email:"",password:"",rePassword:""},values:{id:parseInt(e.match.params.id,10)||null,name:"",email:"",password:"",rePassword:""},loading:!1,redirect:{enabled:!1,url:it.PATHS.configuracion.usuarios,timeout:5}},Object(I.each)(ut,function(e,t){return n[t]=ut[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.didMout()}},{key:"render",value:function(){var e=this,t=this.props.intl,a=this.state,n=a.values,s=a.errors,i=a.alert,c=a.redirect,r=a.loading;return c.enabled?o.a.createElement(f.a,{to:c.url}):o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,n.id?t.formatMessage({id:"".concat("app.users.form",".title-editar"),defaultMessage:"".concat("app.users.form",".title-editar")}):t.formatMessage({id:"".concat("app.users.form",".title-anadir"),defaultMessage:"".concat("app.users.form",".title-anadir")}))),o.a.createElement(b.d.Body,null,i.display&&o.a.createElement(b.a,{type:i.type,icon:"alert-triangle"},i.message),o.a.createElement(b.e,{active:r,loader:!0},o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.users.form",".name"),defaultMessage:"".concat("app.users.form",".name")})},o.a.createElement(b.f.Input,{feedback:s.name,invalid:""!==s.name,value:n.name,onChange:function(t){return e.handleValues(t,"name")}})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.users.form",".email"),defaultMessage:"".concat("app.users.form",".email")})},o.a.createElement(b.f.Input,{feedback:s.email,invalid:""!==s.email,value:n.email,onChange:function(t){return e.handleValues(t,"email")}})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.users.form",".password"),defaultMessage:"".concat("app.users.form",".password")})},o.a.createElement(b.f.Input,{feedback:s.password,invalid:""!==s.password,value:n.password,type:"password",onChange:function(t){return e.handleValues(t,"password")}})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.users.form",".rePassword"),defaultMessage:"".concat("app.users.form",".rePassword")})},o.a.createElement(b.f.Input,{feedback:s.rePassword,invalid:""!==s.rePassword,value:n.rePassword,type:"password",onChange:function(t){return e.handleValues(t,"rePassword")}})))),o.a.createElement(b.d.Footer,null,o.a.createElement(b.c.List,null,o.a.createElement(b.c,{square:!0,color:"success",onClick:this.submit},t.formatMessage({id:"".concat("app.users.form",".save"),defaultMessage:"".concat("app.users.form",".save")})))))}}]),a}(n.Component);dt.defaultProps={};var pt=Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(dt)),mt=function(e){return o.a.createElement(He,_e.VISITAS.tableList)};mt.defaultProps={};var ft=mt,ht=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;Object(V.a)(this,a),n=t.call(this,e);var o=parseInt(e.match.params.id,10)||null;return n.state={alert:{display:!1,type:"danger",message:""},errors:{apellido_1:"",email:"",telefono:"",promociones_id_1:"",promociones_id_2:"",fecha_visita:""},values:{id:o,name:"",apellido_1:"",apellido_2:"",email:"",telefono:"",promociones_id_1:"",promociones_id_2:"",tipos_inmuebles_1:[],tipos_inmuebles_2:[],contactado:"mail",observacion:"",observaciones:[],fecha_visita:new Date,conociste:"",status:"primera",users_id:parseInt(e.session.profile.id,10)},search:!Object(I.isNull)(o),loading:!1,promociones:{},redirect:{enabled:!1,url:_e.PATHS.visitas,timeout:_e.REDIRECT.timeout},reserva:{data:{},modal:{display:!1},candidate:{promocion:{},tipo:{}}}},Object(I.each)(Ae,function(e,t){return n[t]=Ae[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.didMout()}},{key:"render",value:function(){var e=this,t=this.props.intl,a=this.state,s=a.values,i=a.errors,c=a.promociones,r=a.alert,l=a.redirect,u=a.loading,d=a.search,p=a.reserva,m=this.candidatosReserva();if(Object(I.isEmpty)(c))return o.a.createElement(n.Fragment,null);var h=s.promociones_id_1?c[s.promociones_id_1].inmuebles:[],v=s.promociones_id_2?c[s.promociones_id_2].inmuebles:[];return l.enabled?o.a.createElement(f.a,{to:l.url}):o.a.createElement(b.d,null,p.modal.display&&o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t.formatMessage({id:"".concat("app.visitas.form",".modal-reservas.title"),defaultMessage:"".concat("app.visitas.form",".modal-reservas.title")}))),o.a.createElement("div",{className:"modal-body"},Object(I.map)(m,function(t){return o.a.createElement(b.f.Radio,{key:"".concat("app.visitas.form","-radios-").concat(t.promocion.id,"-").concat(t.tipo.id),label:"".concat(t.promocion.name,": ").concat(t.tipo.name),name:"candidato-reserva",checked:p.candidate.promocion.id===t.promocion.id&&p.candidate.tipo.id===t.tipo.id,onChange:function(){return e.selectReserva(t)},isInline:!0})})),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",onClick:function(t){return e.hideModalReservas(function(){return e.submit(t)})},className:"btn btn-secondary","data-dismiss":"modal"},t.formatMessage({id:"".concat("app.visitas.form",".modal-reservas.close"),defaultMessage:"".concat("app.visitas.form",".modal-reservas.close")})))))),o.a.createElement("div",{className:"modal-backdrop fade show"})),o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,s.id?t.formatMessage({id:"".concat("app.visitas.form",".title-editar"),defaultMessage:"".concat("app.visitas.form",".title-editar")}):t.formatMessage({id:"".concat("app.visitas.form",".title-anadir"),defaultMessage:"".concat("app.visitas.form",".title-anadir")}))),o.a.createElement(b.d.Body,null,r.display&&o.a.createElement(b.a,{type:r.type,icon:"alert-triangle"},r.message),o.a.createElement(b.e,{active:u,loader:!0},o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".telefono"),defaultMessage:"".concat("app.visitas.form",".telefono")})},o.a.createElement(b.f.Input,{feedback:i.telefono,invalid:""!==i.telefono,value:s.telefono,onChange:function(t){return e.handleValues(t,"telefono")},onKeyPress:this.catchReturn})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".name"),defaultMessage:"".concat("app.visitas.form",".name")})},o.a.createElement(b.f.Input,{feedback:i.name&&!1,invalid:""!==i.name&&!1,value:s.name,onChange:function(t){return e.handleValues(t,"name")},disabled:!d})),o.a.createElement(b.i.Row,null,o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".apellido_1"),defaultMessage:"".concat("app.visitas.form",".apellido_1")})},o.a.createElement(b.f.Input,{feedback:i.apellido_1,invalid:""!==i.apellido_1,value:s.apellido_1,onChange:function(t){return e.handleValues(t,"apellido_1")},disabled:!d}))),o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".apellido_2"),defaultMessage:"".concat("app.visitas.form",".apellido_2")})},o.a.createElement(b.f.Input,{feedback:i.apellido_2&&!1,invalid:""!==i.apellido_2&&!1,value:s.apellido_2,onChange:function(t){return e.handleValues(t,"apellido_2")},disabled:!d})))),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".email"),defaultMessage:"".concat("app.visitas.form",".email")})},o.a.createElement(b.f.Input,{feedback:i.email,invalid:""!==i.email,value:s.email,onChange:function(t){return e.handleValues(t,"email")},disabled:!d})),o.a.createElement(b.i.Row,null,o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".promociones"),defaultMessage:"".concat("app.visitas.form",".promociones")})},o.a.createElement(b.f.Select,{feedback:i.promociones_id_1,invalid:""!==i.promociones_id_1,value:s.promociones_id_1,onChange:function(t){return e.handlePromocion(t,"promociones_id_1")}},o.a.createElement("option",null),Object(I.map)(c,function(e){var t=e.id,a=e.name;return o.a.createElement("option",{value:t,key:"".concat("app.visitas.form","-promocion-").concat(t)},a)})))),o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".promociones"),defaultMessage:"".concat("app.visitas.form",".promociones")})},o.a.createElement(b.f.Select,{feedback:!1,invalid:!1,value:s.promociones_id_2,onChange:function(t){return e.handlePromocion(t,"promociones_id_2")}},o.a.createElement("option",null),Object(I.map)(c,function(e){var t=e.id,a=e.name;return o.a.createElement("option",{value:t,key:"".concat("app.visitas.form","-promocion-").concat(t)},a)}))))),o.a.createElement(b.i.Row,null,o.a.createElement(b.i.Col,null,Object(I.map)(h,function(t){return o.a.createElement(b.f.Checkbox,{key:"".concat("app.visitas.form","-checkbox-").concat(t.id),label:t.name,name:t.id,value:t.id,checked:-1!==s.tipos_inmuebles_1.indexOf(parseInt(t.id,10)),onChange:function(a){return e.handleInmuebles(t.id,"tipos_inmuebles_1")}})})),o.a.createElement(b.i.Col,null,Object(I.map)(v,function(t){return o.a.createElement(b.f.Checkbox,{key:"".concat("app.visitas.form","-checkbox-").concat(t.id),label:t.name,name:t.id,value:t.id,checked:-1!==s.tipos_inmuebles_2.indexOf(parseInt(t.id,10)),onChange:function(a){return e.handleInmuebles(t.id,"tipos_inmuebles_2")}})}))),o.a.createElement(b.i.Row,null,o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".status"),defaultMessage:"".concat("app.visitas.form",".status")})},o.a.createElement(b.f.Select,{feedback:i.status,invalid:!1,value:s.status,onChange:function(t){return e.handleValues(t,"status")},disabled:!Object(I.isEmpty)(p.data)},o.a.createElement("option",null),Object(I.map)(_e.VISITAS.statuses,function(e){var a=e.key;if("compra"!==a||"compra"===s.status)return o.a.createElement("option",{value:a,key:"".concat("app.visitas.form","-stats-").concat(a)},t.formatMessage({id:"".concat("app.visitas.form",".status.").concat(a),defaultMessage:"".concat("app.visitas.form",".status.").concat(a)}))}))),!Object(I.isEmpty)(p.data)&&p.data.reserva&&o.a.createElement(n.Fragment,null,o.a.createElement(b.c,{block:!0,square:!0,color:"success",onClick:function(t){return e.vendido(t,p.data.id)},className:"btn-marcar-vendido"},t.formatMessage({id:"".concat("app.visitas.form",".marcar-vendido"),defaultMessage:"".concat("app.visitas.form",".marcar-vendido")})),o.a.createElement(b.a,{type:"success",icon:"check"},o.a.createElement("button",{onClick:function(t){return e.handleDeleteVenta(t,p.data.id)},class:"btn btn-icon close"}),t.formatMessage({id:"".concat("app.visitas.form",".reserva"),defaultMessage:"".concat("app.visitas.form",".reserva")},{promocion:c[parseInt(p.data.promocion,10)].name||"promici\xf3n",tipo:_e.VISITAS.tiposInmuebles.cases[parseInt(p.data.tipo,10)]||"tipo inmueble: ".concat(p.data.tipo)}))),!Object(I.isEmpty)(p.data)&&!p.data.reserva&&o.a.createElement(b.a,{type:"success",icon:"check"},o.a.createElement("button",{onClick:function(t){return e.handleDeleteVenta(t,p.data.id)},class:"btn btn-icon close"}),t.formatMessage({id:"".concat("app.visitas.form",".venta"),defaultMessage:"".concat("app.visitas.form",".venta")},{promocion:c[parseInt(p.data.promocion,10)].name||"promici\xf3n",tipo:_e.VISITAS.tiposInmuebles.cases[parseInt(p.data.tipo,10)]||"tipo inmueble: ".concat(p.data.tipo)}))),o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".conociste"),defaultMessage:"".concat("app.visitas.form",".conociste")})},o.a.createElement(b.f.Select,{feedback:i.conociste,invalid:!1,value:s.conociste,onChange:function(t){return e.handleValues(t,"conociste")}},o.a.createElement("option",null),Object(I.map)(_e.VISITAS.conociste,function(e){return o.a.createElement("option",{value:e,key:"".concat("app.visitas.form","-conociste-").concat(e)},t.formatMessage({id:"app.conociste.".concat(e),defaultMessage:"app.conociste.".concat(e)}))}))))),o.a.createElement(b.i.Row,null,o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".fecha_visita"),defaultMessage:"".concat("app.visitas.form",".fecha_visita")})},o.a.createElement(b.f.DatePicker,{feedback:i.fecha_visita,invalid:""!==i.fecha_visita,value:s.fecha_visita,onChange:function(t){return e.setValue("fecha_visita",t)},monthLabels:Object(I.map)(Object(I.range)(12),function(e){return t.formatMessage({id:"".concat("app.visitas.form",".months.").concat(e),defaultMessage:"".concat("app.visitas.form",".months.").concat(e)})})}))),o.a.createElement(b.i.Col,null,o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".contactado"),defaultMessage:"".concat("app.visitas.form",".contactado")})},o.a.createElement(b.f.Select,{feedback:i.contactado,invalid:!1,value:s.contactado,onChange:function(t){return e.handleValues(t,"contactado")}},o.a.createElement("option",null),Object(I.map)(_e.VISITAS.constactado,function(e){var a=e.key;return o.a.createElement("option",{value:a,key:"".concat("app.visitas.form","-contactado-").concat(a)},t.formatMessage({id:"".concat("app.visitas.form",".contactado.").concat(a),defaultMessage:"".concat("app.visitas.form",".contactado.").concat(a)}))}))))),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.visitas.form",".observaciones"),defaultMessage:"".concat("app.visitas.form",".observaciones")})},o.a.createElement(b.f.Textarea,{feedback:i.observacion,invalid:!1,value:s.observacion,onChange:function(t){return e.handleValues(t,"observacion")}})),s.observaciones&&Object(I.map)(s.observaciones,function(e){var t=e.created_at,a=e.text;return o.a.createElement("div",{className:"d-flex alert alert-secondary notificacion-observaciones",key:"".concat("app.visitas.form","-").concat(t)},o.a.createElement(b.n,{message:a,time:q()(t).format(_e.DEFAULT.DATE_TIME_FORMAT)}))}))),o.a.createElement(b.d.Footer,null,o.a.createElement(b.c.List,null,o.a.createElement(b.c,{square:!0,color:"success",onClick:this.submit},t.formatMessage({id:"".concat("app.visitas.form",".save"),defaultMessage:"".concat("app.visitas.form",".save")})))))}}]),a}(n.Component);ht.defaultProps={};var vt=Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(ht)),bt=Object(g.a)({},_e);bt.VENTAS={tableList:{url:"".concat(bt.API_DOMAIN,"/api/ventas"),i18nKey:"app.ventas.index",limit:bt.DEFAULT.TABLE_LIMIT,addUrl:bt.PATHS.ventas_anadir,columns:{defaults:{src:function(e,t){return e[t]},type:"string",i18n:function(e){return e.key}},payload:[{key:"promocion"},{key:"name",src:function(e){return""!==e.name&&""!==e.apellido_1?"".concat(e.apellido_1,", ").concat(e.name):""!==e.name?e.name:e.apellido_1}},{key:"created_at",src:function(e,t){return q()(e.created_at).format(bt.DEFAULT.DATE_FORMAT)}}]}}},bt.VENTAS.tableList.columns.payload=Object(I.map)(bt.VENTAS.tableList.columns.payload,function(e){return Object(g.a)(Object(g.a)({},bt.VENTAS.tableList.columns.defaults),e)});var gt=bt,Et=function(e){return o.a.createElement(He,gt.VENTAS.tableList)};Et.defaultProps={};var Ot=Et,jt=(a(359),"app.ventas.form");var yt={catchReturn:function(e){var t=this;if("Enter"===e.key){var a="".concat(gt.VISITAS.tableList.url,"?query=").concat(this.state.values.visita.apellidos);return gt.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){e.data.data.results.length>0&&t.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{modal:Object(g.a)(Object(g.a)({},t.modal),{},{display:!0,candidates:e.data.data.results})})})}).catch(function(e){t.setState({search:!0})})}},didMout:function(){var e=this;this.setState({loading:!0}),this.fetchPromociones(function(){e.setState({loading:!1})})},displayAlert:function(e,t){this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{alert:Object(g.a)(Object(g.a)({},a.alert),{},{display:!0,type:t,message:e})})})},displayError:function(e){return this.displayAlert(e,"danger")},displaySuccess:function(e){return this.displayAlert(e,"success")},fetchPromociones:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},a="".concat(gt.PROMOCIONES.tableList.url,"?limit=100");return gt.DEBUG&&console.log(a),x.a.get(a,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(a){if(200!==a.status&&204!==a.status)return t(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(a.status)));e.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{promociones:Object(I.chain)(a.data.data.results).map(function(e){return Object(g.a)(Object(g.a)({},e),{},{inmuebles:[]})}).orderBy("name","desc").keyBy("id").value()})},function(){return t(null,a.data.data)})}).catch(function(e){return t(e)})},fetchTiposInmuebles:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},n=Object(I.template)(gt.VISITAS.tiposInmuebles.url)({id:e});return gt.DEBUG&&console.log(n),x.a.get(n,{headers:{Authorization:"Bearer ".concat(this.props.session.authToken),"Content-Type":"application/json"}}).then(function(n){if(200!==n.status&&204!==n.status)return a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(n.status)));t.setState(function(t){return Object(g.a)(Object(g.a)({},t),{},{promociones:Object(g.a)(Object(g.a)({},t.promociones),{},Object(me.a)({},e,Object(g.a)(Object(g.a)({},t.promociones[e]),{},{inmuebles:n.data.data.inmuebles||[]})))})},function(){return a(null,n.data.data)})}).catch(function(e){return a(e)})},handleInmuebles:function(e,t){var a=this.state.values[t];-1===a.indexOf(e)?a.push(e):a=Object(I.remove)(a,e),this.setValue(t,a)},handlePromocion:function(e){var t=e.target.value;this.fetchTiposInmuebles(t),this.setValue("promocion_id",t),this.setValue("tipos_inmuebles",[])},handleValues:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null},n=e.target.value;this.setValue(t,n,a)},handleVisita:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null},a=e.target.value;this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{values:Object(g.a)(Object(g.a)({},e.values),{},{visita:Object(g.a)(Object(g.a)({},e.values.visita),{},{apellidos:a})})})},t)},hideModal:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};e.preventDefault(),this.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{modal:Object(g.a)(Object(g.a)({},e.modal),{},{display:!1})})},t)},setValue:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return null};this.setState(function(a){return Object(g.a)(Object(g.a)({},a),{},{values:Object(g.a)(Object(g.a)({},a.values),{},Object(me.a)({},e,t))})},a)},submit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};e.preventDefault(),this.validate(function(){console.log(t.state.values);var e={tipos_inmuebles_id:parseInt(t.state.values.tipos_inmuebles_id,10),promociones_id:parseInt(t.state.values.promocion_id,10),visitas_id:parseInt(t.state.values.visita.id,10)},n=gt.VENTAS.tableList.url;return gt.DEBUG&&console.log(n,e),x()({method:t.state.values.id?"put":"post",url:n,data:e,headers:{Authorization:"Bearer ".concat(t.props.session.authToken),"Content-Type":"application/json"}}).then(function(e){return 200!==e.status&&204!==e.status?a(new Error("Status erros in fetchStats expected 200 or 204 received ".concat(e.status))):e.data.error?t.displayError(e.data.message):(t.displaySuccess(t.props.intl.formatMessage({id:"".concat(jt,".submit.success"),defaultMessage:"".concat(jt,".submit.success")},{timeout:t.state.redirect.timeout})),window.scrollTo(0,0),void setTimeout(function(){t.setState(function(e){return Object(g.a)(Object(g.a)({},e),{},{redirect:Object(g.a)(Object(g.a)({},e.redirect),{},{enabled:!0})})})},1e3*t.state.redirect.timeout))}).catch(function(e){return a(e)})})},validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=this.state.values,a=Object(g.a)(Object(g.a)({},this.state),{},{errors:{tipos_inmuebles_id:"",visita:""}}),n=!0;null===t.visita.id&&(a.errors.visita=this.props.intl.formatMessage({id:"".concat(jt,".err.visita"),defaultMessage:"".concat(jt,".err.visita")}),n=!1),""===t.tipos_inmuebles_id&&(a.errors.tipos_inmuebles_id=this.props.intl.formatMessage({id:"".concat(jt,".err.tipos_inmuebles_id"),defaultMessage:"".concat(jt,".err.tipos_inmuebles_id")}),n=!1),this.setState(a,function(){return n?e():null})}},Mt=function(e){Object(H.a)(a,e);var t=Object(G.a)(a);function a(e){var n;Object(V.a)(this,a),n=t.call(this,e);var o=parseInt(e.match.params.id,10)||null;return n.state={alert:{display:!1,type:"danger",message:""},errors:{tipos_inmuebles_id:"",visita:""},values:{id:o,tipos_inmuebles_id:"",visita:{id:null,apellidos:""},promocion_id:"",tipos_inmuebles:[]},loading:!1,promociones:{},redirect:{enabled:!1,url:gt.PATHS.ventas,timeout:gt.REDIRECT.timeout},modal:{display:!1,candidates:{}}},Object(I.each)(yt,function(e,t){return n[t]=yt[t].bind(Object(B.a)(n))}),n}return Object(U.a)(a,[{key:"componentDidMount",value:function(){this.didMout()}},{key:"render",value:function(){var e=this,t=this.props.intl,a=this.state,s=a.values,i=a.errors,c=a.promociones,r=a.alert,l=a.redirect,u=a.loading,d=a.modal;if(Object(I.isEmpty)(c))return o.a.createElement(n.Fragment,null);var p=s.promocion_id?c[s.promocion_id].inmuebles:[];return l.enabled?o.a.createElement(f.a,{to:l.url}):o.a.createElement(n.Fragment,null,o.a.createElement(b.d,null,o.a.createElement(b.d.Header,null,o.a.createElement(b.j.H3,null,s.id?t.formatMessage({id:"".concat("app.ventas.form",".title-editar"),defaultMessage:"".concat("app.ventas.form",".title-editar")}):t.formatMessage({id:"".concat("app.ventas.form",".title-anadir"),defaultMessage:"".concat("app.ventas.form",".title-anadir")}))),o.a.createElement(b.d.Body,null,r.display&&o.a.createElement(b.a,{type:r.type,icon:"alert-triangle"},r.message),o.a.createElement(b.e,{active:u,loader:!0},o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.ventas.form",".visita"),defaultMessage:"".concat("app.ventas.form",".visita")})},o.a.createElement(b.f.Input,{feedback:i.visita,invalid:""!==i.visita,value:s.visita.apellidos,onChange:this.handleVisita,onKeyPress:this.catchReturn})),o.a.createElement(b.f.Group,{label:t.formatMessage({id:"".concat("app.ventas.form",".promociones"),defaultMessage:"".concat("app.ventas.form",".promociones")})},o.a.createElement(b.f.Select,{value:s.promocion_id,onChange:function(t){return e.handlePromocion(t,"promocion_id")},feedback:i.tipos_inmuebles_id,invalid:""!==i.tipos_inmuebles_id},o.a.createElement("option",null),Object(I.map)(c,function(e){var t=e.id,a=e.name;return o.a.createElement("option",{value:t,key:"".concat("app.ventas.form","-promocion-").concat(t)},a)}))),o.a.createElement(b.f.Group,null,o.a.createElement(b.i.Row,null,Object(I.map)(Object(I.chunk)(p,Object(I.ceil)(p.length/2)),function(t,a){return o.a.createElement(b.i.Col,{key:"".concat("app.ventas.form","-grid-col-input-").concat(a)},Object(I.map)(t,function(t){return o.a.createElement(b.f.Checkbox,{key:"".concat("app.ventas.form","-checkbox-").concat(t.id),label:t.name,name:t.id,value:t.id,checked:t.id===s.tipos_inmuebles_id,onChange:function(t){return e.setValue("tipos_inmuebles_id",parseInt(t.target.value,10))}})}))}))))),o.a.createElement(b.d.Footer,null,o.a.createElement(b.c.List,null,o.a.createElement(b.c,{square:!0,color:"success",onClick:this.submit},t.formatMessage({id:"".concat("app.ventas.form",".save"),defaultMessage:"".concat("app.ventas.form",".save")}))))),d.display&&o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog",role:"document"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("h5",{className:"modal-title"},t.formatMessage({id:"".concat("app.ventas.form",".modal.title"),defaultMessage:"".concat("app.ventas.form",".modal.title")})),o.a.createElement("button",{type:"button",onClick:this.hideModal,className:"close","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"}))),o.a.createElement("div",{className:"modal-body"},o.a.createElement(b.l.Group,{className:"modal-list"},Object(I.map)(d.candidates,function(t){var a=t.apellido_1;return""!==t.name&&""!==t.apellido_1?a="".concat(t.apellido_1,", ").concat(t.name):""!==t.name&&(a=t.name),function(a){return o.a.createElement("a",{key:"".concat("app.ventas.form",".li.").concat(t.id),className:"list-group-item",onClick:function(n){return e.setValue("visita",{id:t.id,apellidos:a},function(){return e.hideModal(new Event("click"))})}},a)}(a)}))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("button",{type:"button",onClick:this.hideModal,className:"btn btn-secondary","data-dismiss":"modal"},t.formatMessage({id:"".concat("app.ventas.form",".modal.close"),defaultMessage:"".concat("app.ventas.form",".modal.close")})))))),o.a.createElement("div",{className:"modal-backdrop fade show"})))}}]),a}(n.Component);Mt.defaultProps={};var _t=Object(p.c)(Object(c.b)(function(e){return{session:e.session}},function(e){return Object(r.b)({},e)})(Mt));Object(p.b)(Object(d.a)(v.a));var St=function(e){var t=e.app.i18n,a=function(e){return y.HASH_ROUTER?o.a.createElement(m.b,null,e):o.a.createElement(m.a,null,e)},s=function(a){return o.a.createElement(p.a,{locale:t.locale,messages:t.messages[t.locale]},o.a.createElement(n.Fragment,null,e.loading&&o.a.createElement(ue,{color:"#DB2120"}),a))};return e.session.authenticated?s(a(o.a.createElement(n.Fragment,null,o.a.createElement(w,null),o.a.createElement(b.o.Content,null,o.a.createElement(f.d,null,o.a.createElement(f.b,{path:y.PATHS.visitas_anadir,component:vt}),o.a.createElement(f.b,{path:y.PATHS.visitas_editar,component:vt}),o.a.createElement(f.b,{path:y.PATHS.visitas,component:ft}),o.a.createElement(f.b,{path:y.PATHS.ventas_anadir,component:_t}),o.a.createElement(f.b,{path:y.PATHS.ventas,component:Ot}),o.a.createElement(f.b,{path:y.PATHS.configuracion.usuarios_anadir,component:pt}),o.a.createElement(f.b,{path:y.PATHS.configuracion.usuarios_editar,component:pt}),o.a.createElement(f.b,{path:y.PATHS.configuracion.usuarios,component:rt}),o.a.createElement(f.b,{path:y.PATHS.configuracion.promociones_anadir,component:Ze}),o.a.createElement(f.b,{path:y.PATHS.configuracion.promociones_editar,component:Ze}),o.a.createElement(f.b,{path:y.PATHS.configuracion.promociones,component:Fe}),o.a.createElement(f.b,{path:y.PATHS.status_promociones,component:at}),o.a.createElement(f.b,{path:y.PATHS.configuracion.tiposInmuebles,component:ot}),o.a.createElement(f.b,{component:ae}))),o.a.createElement(b.p.Footer,{copyright:y.SITE.copyright})))):s(a(o.a.createElement(be,null)))};St.defaultProps={loading:!1};var At=Object(c.b)(function(e){return{loading:e.loading.display,app:e.app,session:e.session}})(St);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var xt=a(70),It=a.n(xt),Tt=function(){function e(){Object(V.a)(this,e),this.getProfile=this.getProfile.bind(this)}return Object(U.a)(e,[{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return!(It()(e).exp>Date.now()/1e3)}catch(t){return!0}}},{key:"setToken",value:function(e){localStorage.setItem(k.TOKEN_NAME,e)}},{key:"getToken",value:function(){return localStorage.getItem(k.TOKEN_NAME)}},{key:"logout",value:function(){localStorage.removeItem(k.TOKEN_NAME)}},{key:"getProfile",value:function(){var e=It()(this.getToken());return e.admin=void 0!==e.aud&&"admin"===e.aud,e}}]),e}(),Ct={authenticated:!1,authToken:null,profile:{}},kt=new Tt,Nt=kt.loggedIn(),Pt={authenticated:Nt,authToken:Nt?kt.getToken():Ct.authToken,profile:Nt?kt.getProfile():Ct.profile},Dt=function(e){return function(e){return function(t){var a=new Tt;switch(t.type){case T.RECEIVE_LOGIN_SUCCESS:a.setToken(t.payload.data.token),t.payload={authenticated:!0,authToken:t.payload.data.token,profile:a.getProfile()},e(t);break;case T.RECEIVE_LOGOUT_SUCCESS:a.logout(),e(t);break;default:e(t)}}}};var Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(g.a)({},Pt),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.REQUEST_LOGIN:case T.RECEIVE_LOGOUT_SUCCESS:case T.RECEIVE_LOGIN_ERROR:return Object(g.a)({},Ct);case T.RECEIVE_LOGIN_SUCCESS:return Object(g.a)(Object(g.a)({},e),t.payload);default:return e}},Rt={APP_ALERTS_ADD:"APP_ALERTS_ADD",APP_ALERTS_REMOVE:"APP_ALERTS_REMOVE",APP_ALERTS_REMOVE_ALL:"APP_ALERTS_REMOVE_ALL"},wt={},Vt=Object(g.a)({},O.a);Vt.APP_ALERTS={timeout:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).ALERTS_TIMEOUT||8500,default_style:Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_DOMAIN:"http://gestion.construccionesandia.com/index.php"}).APP_ALERTS_DEFAULT_STYLE||"bulma"};var Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rt.APP_ALERTS_ADD:return Object(g.a)(Object(g.a)({},e),{},Object(me.a)({},t.payload.id,t.payload));case Rt.APP_ALERTS_REMOVE:return Object(I.omit)(e,[t.payload.id]);case Rt.APP_ALERTS_REMOVE_ALL:return wt;default:return e}},Bt="APP_SET_LOCALE",Ht={i18n:{locale:y.I18N.default,messages:{es:Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)(Object(g.a)({},{"app.accounts-list.pagination.goto-page":"Ir a la p\xe1gina {value, number}","app.accounts-list.pagination.next-page":"Siguiente","app.accounts-list.pagination.page":"P\xe1gina {value, number}","app.accounts-list.pagination.previous":"Anterior","app.conociste.cono":"Conocidos","app.conociste.ddnava":"Anuncio Diario de Navarra","app.conociste.ddnavc":"Clasificados Diario de Navarra","app.conociste.ddnot":"Diario de Noticias","app.conociste.fotoc":"fotocasa.com","app.conociste.ideal":"idealista.com","app.conociste.lista":"lista de interesados","app.conociste.pisos":"pisos.com","app.conociste.valla":"Valla de obra","app.conociste.web":"P\xe1gina web","app.conociste.oficina":"Oficina"}),{"app.envios.index.hoc.modal.body.one":"Va a enviar un correo.","app.envios.index.hoc.modal.body.many":"Va a enviar un total de {count, number} correos.","app.envios.index.hoc.modal.body.zero":"Va a enviar un newsletter a todos los contactos de la base de datos.","app.envios.index.hoc.select.template":"Seleccione la template a enviar","app.envios.index.hoc.modal.title":"Env\xedo de correos","app.envios.index.hoc.modal.confirm":"enviar","app.envios.index.hoc.modal.close":"close","app.envios.index.alert.success":"El env\xedo se realizado correctamente"}),{"app.home.index.logout":"salir","app.home.index.visitas":"Visitas","app.home.index.usuarios":"Usuarios","app.home.index.promociones":"Promociones","app.home.index.tipos-inmuebles":"Tipos de inmuebles","app.home.index.salir":"Salir"}),{"app.home.index.alert.historical":"Existen unos datos historicos de {historico, number} inmuebles vendidos o reservados y {reservadas, number} reservas.","app.home.index.btn.historical-display":"Descontar hist\xf3rico y reservas de las ventas","app.home.index.btn.historical-hide":"Aplicar hist\xf3rico y reservas a las ventas","app.home.index.count":"Total","app.home.index.counts.libres":"Viviendas libres","app.home.index.counts.reservadas":"Viviendas reservadas","app.home.index.counts.totales":"Viviendas","app.home.index.counts.vendidas":"Viviendas vendidas","app.home.index.desde":"Fecha inicio","app.home.index.estatus":"Estado","app.home.index.hasta":"Fecha fin","app.home.index.header.stats.comerciales":"Visitas por comercial","app.home.index.header.stats.conociste":"C\xf3mo nos han conocido","app.home.index.header.stats.counts":"Venta de viviendas","app.home.index.header.stats.promociones":"Visitas por promoci\xf3n","app.home.index.logotipo":"Logotipo construcciones Andia","app.home.index.medio":"Medio","app.home.index.promocion":"Promoci\xf3n","app.home.index.select-promociones-all":"Todas las promociones","app.home.index.select.month":"\xdaltimo mes","app.home.index.select.since":"Rango temporal:","app.home.index.select.week":"\xdaltima semana","app.home.index.select.year":"\xdaltimo a\xf1o","app.home.index.status-promociones":"Status","app.home.index.table.col.cantidad":"Cantidad","app.home.index.table.col.name":"Tipo","app.home.index.table.col.percent":"%","app.home.index.table.col.vendidas":"Ventas","app.home.index.title":"Panel de administraci\xf3n","app.home.index.ventas":"Ventas","app.home.index.visita":"Visita"}),{"app.login.index.btn.submit":"Enviar","app.login.index.label.email":"Email","app.login.index.label.password":"Contrase\xf1a","app.login.index.placeholder.email":"mail@mail.com","app.login.index.title":"Construcciones Andia","app.login.index.form.err.email":"Por favor proporcione un email v\xe1lido","app.login.index.form.err.password":"La contrase\xf1a es obligatoria"}),{"app.promociones.form.cantidad":"Inmuebles de tipo: {name}","app.promociones.form.err.nombre":"El nombre es un campo obligatorio","app.promociones.form.err.zona":"La zona es un campo obligatorio","app.promociones.form.historico.reservas":"Tipos de inmuebles previamente reservado, indicar cantidad, cero por defecto","app.promociones.form.historico.venta":"Tipos de inmuebles previamente vendido, indicar cantidad, cero por defecto","app.promociones.form.name":"Nombre","app.promociones.form.save":"Guardar","app.promociones.form.submit.success":"La promoci\xf3n se ha guardado correctamente. Vas a ser redirigirdo al listado de promociones en {timeout} segundos.","app.promociones.form.tipos-inmueble":"Tipos de inmuebles, indicar cantidad, cero por defecto","app.promociones.form.title-anadir":"A\xf1adir promoci\xf3n","app.promociones.form.title-editar":"Editar promoci\xf3n","app.promociones.form.zona.pagination":"ver m\xe1s resultados","app.promociones.form.zona":"Zona","app.promociones.index.column.active.false":"inactivo","app.promociones.index.column.active.true":"activo","app.promociones.index.column.active":"Activo","app.promociones.index.column.home.false":"ocultar","app.promociones.index.column.home.true":"mostrar","app.promociones.index.column.home":"Portada","app.promociones.index.column.id":"ID","app.promociones.index.column.name":"Nombre","app.promociones.index.column.zona":"Zona","app.promociones.index.display-active":"Mostrar promociones inactivas","app.promociones.index.hide-active":"Ocultar promociones inactivas","app.promociones.index.nuevo":"A\xf1adir promoci\xf3n","app.promociones.index.title":"Listado de promociones"}),{"app.status-promociones.index.title":"Status de las promociones","app.status-promociones.index.totales":"TOTALES","app.status-promociones.index.ventas":"Ventas","app.status-promociones.index.visitas":"Visitas","app.status-promociones.index.viviendas-libres":"Viviendas libres","app.status-promociones.index.viviendas-promocion":"Viviendas promoci\xf3n","app.status-promociones.index.viviendas-reservadas":"Viviendas reservadas","app.status-promociones.index.viviendas-vendidas":"Viviendas vendidas","app.status-promociones.index.viviendas-venta":"Viviendas a la venta","app.status-promociones.screenshot.btn":"screeshot","app.status-promociones.screenshot.modal.close":"cerrar","app.status-promociones.screenshot.modal.input.name":"Nombre del screeshot","app.status-promociones.screenshot.modal.save":"guardar","app.status-promociones.screenshot.modal.title":"Obtener screeshot","app.status-promociones.screenshot.sucess-alert":"El screenshot se ha guardado correctamente","app.status-promociones.index.no-results":"No existen datos para los criterios seleccionados"}),{"app.table-list.index.column.actions":"Acciones","app.table-list.index.btn.edit":"editar","app.table-list.index.buscar":"Buscar","app.visitas.index.send":"correos"}),{"app.tipos-inmuebles.index.column.active.false":"inactivo","app.tipos-inmuebles.index.column.active.true":"activo","app.tipos-inmuebles.index.column.active":"Activo","app.tipos-inmuebles.index.column.id":"ID","app.tipos-inmuebles.index.column.name":"Nombre","app.tipos-inmuebles.index.column.created_at":"Fecha de creaci\xf3n","app.tipos-inmuebles.index.title":"Listado de los tipos de inmuebles"}),{"app.users.form.email":"Email","app.users.form.err.email":"Por favor proporcione un email v\xe1lido","app.users.form.err.name":"El nombre es un campo obligatorio","app.users.form.err.password":"La contrase\xf1a es obligatoria al crear un usuario y debe de ser al menos de 6 caracteres","app.users.form.err.rePassword":"Ambas contrase\xf1as deben coincidir","app.users.form.name":"Nombre","app.users.form.password":"Contrase\xf1a","app.users.form.rePassword":"Contrase\xf1a","app.users.form.save":"Guardar","app.users.form.submit.success":"El usurio se ha guardado correctamente. Vas a ser redirigirdo al listado de usuarios en {timeout} segundos.","app.users.form.title-anadir":"A\xf1adir usuario","app.users.form.title-editar":"Editar usuario","app.users.form.zona.pagination":"ver m\xe1s resultados","app.users.index.column.active.false":"inactivo","app.users.index.column.active.true":"activo","app.users.index.column.active":"Activo","app.users.index.column.created_at":"Fecha de creaci\xf3n","app.users.index.column.email":"Email","app.users.index.column.id":"ID","app.users.index.column.last_login":"\xdaltimo acceso a la APP","app.users.index.column.name":"Nombre","app.users.index.column.superuser":"Administradores","app.users.index.nuevo":"A\xf1adir usuario","app.users.index.title":"Listado de usuarios"}),{"app.visitas.form.apellido_1":"Primer apellido","app.visitas.form.apellido_2":"Segundo apellido","app.visitas.form.conociste":"C\xf3mo nos conociste","app.visitas.form.contactado.mail":"Email","app.visitas.form.contactado.no":"No desea ser contactado","app.visitas.form.contactado.phone":"Tel\xe9fono","app.visitas.form.contactado":"C\xf3mo desea ser contactado","app.visitas.form.email":"Email","app.visitas.form.err.apellido_1":"El primer apellido es un campo obligatorio","app.visitas.form.err.email":"Por favor proporcione un email v\xe1lido","app.visitas.form.err.name":"El nombre es un campo obligatorio","app.visitas.form.err.promociones_id":"La promoci\xf3n es un campo obligatorio","app.visitas.form.err.telefono":"El tel\xe9fono es un campo obligatorio","app.visitas.form.fecha_visita":"Fecha visita","app.visitas.form.modal-reservas.close":"guardar","app.visitas.form.modal-reservas.title":"Seleccione el inmueble reservado","app.visitas.form.months.0":"Enero","app.visitas.form.months.1":"Febrero","app.visitas.form.months.10":"Noviembre","app.visitas.form.months.11":"Diciembre","app.visitas.form.months.2":"Marzo","app.visitas.form.months.3":"Abril","app.visitas.form.months.4":"Mayo","app.visitas.form.months.5":"Junio","app.visitas.form.months.6":"Julio","app.visitas.form.months.7":"Agosto","app.visitas.form.months.8":"Septiembre","app.visitas.form.months.9":"Octubre","app.visitas.form.name":"Nombre","app.visitas.form.observaciones":"Observaciones","app.visitas.form.promociones":"Promoci\xf3n","app.visitas.form.publicidad":"Desea recibir publicidad","app.visitas.form.save":"Guardar","app.visitas.form.si":"S\xed","app.visitas.form.status.anulacion":"Anulaci\xf3n","app.visitas.form.status.compra":"Compra","app.visitas.form.status.primera":"Visita","app.visitas.form.status.reserva":"Reserva","app.visitas.form.status":"Estatus","app.visitas.form.submit.success":"La visita se ha guardado correctamente. Vas a ser redirigirdo al listado de visitas en {timeout} segundos.","app.visitas.form.telefono":"Tel\xe9fono","app.visitas.form.title-anadir":"A\xf1adir visita","app.visitas.form.title-editar":"Editar visita","app.visitas.form.venta":"Venta asociada a la visita: {promocion} {tipo}","app.visitas.form.zona.pagination":"ver m\xe1s resultados","app.visitas.index.column.comercial":"Comercial","app.visitas.index.column.deleted":"Borrar","app.visitas.index.column.email":"Email","app.visitas.index.column.fecha_visita":"Fecha de la visita","app.visitas.index.column.name":"Nombre","app.visitas.index.column.promocion":"Promoci\xf3n","app.visitas.index.column.status":"Estatus","app.visitas.index.column.telefono":"Tel\xe9fono","app.visitas.index.desde":"desde","app.visitas.index.excel":"excel","app.visitas.index.filter-visitas.buscar":"Buscar","app.visitas.index.filter-visitas.clear":"limpiar filtros","app.visitas.index.filter-visitas.close":"Cerrar","app.visitas.index.filter-visitas.fechas":"Fechas","app.visitas.index.filter-visitas.filter":"filtra visitas","app.visitas.index.filter-visitas.promociones":"Promociones","app.visitas.index.filter-visitas.status":"Estado","app.visitas.index.filter-visitas.title":"Filtrar visitas","app.visitas.index.hasta":"hasta","app.visitas.index.modal.body":"\xbfEst\xe1 seguro de borrar la visita? esta acci\xf3n no tiene vuelta atr\xe1s","app.visitas.index.modal.close":"Cerrar","app.visitas.index.modal.delete":"Borrar","app.visitas.index.modal.title":"Borrar visita","app.visitas.index.newsletter":"newsletter","app.visitas.index.no-results":"No existen visitas para los criterios seleccionados","app.visitas.index.nuevo":"A\xf1adir visita","app.visitas.index.title":"Listado de visitas","app.visitas.form.reserva":"Reserva asociada a la visita: {promocion} {tipo}","app.visitas.form.marcar-vendido":"Confirmar reserva como venta"}),{"app.ventas.form.err.tipos_inmuebles_id":"Es necesario seleccionar la promoci\xf3n y el tipo de inmueble vendido","app.ventas.form.err.visita":"Es necesario asociar una visita a la venta","app.ventas.form.modal.close":"Cerrar","app.ventas.form.modal.title":"Seleccione una visita","app.ventas.form.promociones":"Promoci\xf3n","app.ventas.form.save":"Guardar","app.ventas.form.submit.success":"La venta se ha guardado correctamente","app.ventas.form.title-anadir":"A\xf1adir nueva venta","app.ventas.form.visita":"Visitas","app.ventas.index.column.created_at":"Fecha de creaci\xf3n","app.ventas.index.column.name":"Comprador","app.ventas.index.column.promocion":"Promoci\xf3n","app.ventas.index.nuevo":"A\xf1adir venta","app.ventas.index.title":"Listado de ventas","app.ventas.index.no-results":"No existen ventas en la base de datos"})}}},Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bt:return-1===y.I18N.langs.indexOf(t.payload.locale)?e:Object(g.a)(Object(g.a)({},e),{},{i18n:Object(g.a)(Object(g.a)({},e.i18n),{},{loacle:t.payload.locale})});default:return e}},Ft=Object(r.c)({alerts:Ut,app:Gt,loading:ce,session:Lt}),zt=(a(362),a(363),[Dt,l.a]),Yt=[Ft];if(O.a.DEBUG){var qt=Object(u.createLogger)({collapsed:function(e,t,a){return void 0!==t.payload&&void 0!==t.payload.expand?!t.payload.expand:!a.error}});zt.push(qt)}var Kt=r.a.apply(void 0,zt)(r.d);i.a.render(o.a.createElement(c.a,{store:Kt.apply(void 0,Yt)},o.a.createElement(At,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[199,1,2]]]);
//# sourceMappingURL=main.4958eca9.chunk.js.map